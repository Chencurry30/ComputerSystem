{"version":3,"file":"js/139.46fb0c8c.js","mappings":"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","sources":["webpack://web_7/./src/views/baseViews/loginView.vue","webpack://web_7/./node_modules/js-cookie/dist/js.cookie.mjs","webpack://web_7/src/views/baseViews/loginView.vue","webpack://web_7/./src/views/baseViews/loginView.vue?6eaf","webpack://web_7/./src/views/baseViews/loginView.vue?47c4","webpack://web_7/./src/utils/rules.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"SystemUserBox\"},[_c('div',{staticClass:\"loginBox\"},[_c('div',{staticClass:\"loginFormTitle\"},[_vm._v(\"用户登录\")]),_c('el-form',{ref:\"dataForm\",staticClass:\"loginForm\",attrs:{\"label-width\":\"0px\",\"model\":_vm.dataForm,\"rules\":_vm.checkForm}},[_c('div',{staticClass:\"formData\"},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"prefix-icon\":\"el-icon-user\",\"placeholder\":\"请输入账号\"},model:{value:(_vm.dataForm.username),callback:function ($$v) {_vm.$set(_vm.dataForm, \"username\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"dataForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":_vm.changeHiddenImg === true ? 'text' : 'password',\"prefix-icon\":\"el-icon-thumb\",\"placeholder\":\"请输入密码\"},on:{\"focus\":_vm.showImg},model:{value:(_vm.dataForm.password),callback:function ($$v) {_vm.$set(_vm.dataForm, \"password\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"dataForm.password\"}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showHiddenImg),expression:\"showHiddenImg\"}],staticClass:\"clickImg\",on:{\"click\":_vm.changeImg}},[_c('div',{class:_vm.changeHiddenImg === true ? 'showImg' : 'hiddenImg'})])],1)],1),_c('div',{staticClass:\"loginSelectNav\"},[_c('div',{staticClass:\"navleft\"},[_c('div',{staticClass:\"leftbtn\"},[_c('div',{class:_vm.automaticLogin === false ? 'dashDiv' : 'dashDivSelectd'},[_c('span',{staticClass:\"dashSpan\",on:{\"click\":_vm.submitLogin}})]),_c('div',{staticClass:\"prompt\"},[_vm._v(\"自动登录\")])])]),_c('div',{staticClass:\"navright\"},[_c('div',{staticClass:\"prompt\",on:{\"click\":_vm.gotoretrieve}},[_vm._v(\"忘记密码\")])])]),_c('el-form-item',{staticClass:\"reterieveBtn\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":!_vm.canSubmit},on:{\"click\":function($event){return _vm.goToLogin('dataForm')}}},[_vm._v(\"登    录 \")])],1),_c('div',{staticClass:\"userBack\"},[_c('div',{staticClass:\"userBack-left font-text\"},[_c('router-link',{attrs:{\"to\":{ name: 'Home' }}},[_vm._v(\"返回首页\")])],1),_c('div',{staticClass:\"userBack-right font-text\"},[_c('router-link',{attrs:{\"to\":{ name: 'registerView' }}},[_vm._v(\"用户注册\")])],1)])],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*! js-cookie v3.0.1 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (key, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    key = encodeURIComponent(key)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      key + '=' + converter.write(value, key) + stringifiedAttributes)\n  }\n\n  function get (key) {\n    if (typeof document === 'undefined' || (arguments.length && !key)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var foundKey = decodeURIComponent(parts[0]);\n        jar[foundKey] = converter.read(value, foundKey);\n\n        if (key === foundKey) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return key ? jar[key] : jar\n  }\n\n  return Object.create(\n    {\n      set: set,\n      get: get,\n      remove: function (key, attributes) {\n        set(\n          key,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport default api;\n","<template>\r\n  <div class=\"SystemUserBox\">\r\n    <div class=\"loginBox\">\r\n      <div class=\"loginFormTitle\">用户登录</div>\r\n      <el-form class=\"loginForm\" label-width=\"0px\" ref=\"dataForm\" :model=\"dataForm\" :rules=\"checkForm\">\r\n\r\n        <div class=\"formData\">\r\n          <el-form-item prop=\"username\">\r\n            <el-input type=\"text\" prefix-icon=\"el-icon-user\" placeholder=\"请输入账号\" v-model.trim=\"dataForm.username\">\r\n            </el-input>\r\n          </el-form-item>\r\n\r\n\r\n          <el-form-item prop=\"password\">\r\n            <el-input :type=\"changeHiddenImg === true ? 'text' : 'password'\" prefix-icon=\"el-icon-thumb\"\r\n              placeholder=\"请输入密码\" v-model.trim=\"dataForm.password\" @focus=\"showImg\"></el-input>\r\n            <div class=\"clickImg\" v-show=\"showHiddenImg\" @click=\"changeImg\">\r\n              <div :class=\"changeHiddenImg === true ? 'showImg' : 'hiddenImg'\"></div>\r\n            </div>\r\n          </el-form-item>\r\n\r\n\r\n        </div>\r\n\r\n        <div class=\"loginSelectNav\">\r\n          <div class=\"navleft\">\r\n            <div class=\"leftbtn\">\r\n              <div :class=\"automaticLogin === false ? 'dashDiv' : 'dashDivSelectd'\">\r\n                <span class=\"dashSpan\" @click=\"submitLogin\"></span>\r\n              </div>\r\n              <div class=\"prompt\">自动登录</div>\r\n            </div>\r\n          </div>\r\n          <div class=\"navright\">\r\n            <div class=\"prompt\" @click=\"gotoretrieve\">忘记密码</div>\r\n          </div>\r\n        </div>\r\n\r\n        <el-form-item class=\"reterieveBtn\">\r\n          <el-button type=\"primary\" @click=\"goToLogin('dataForm')\" :disabled=\"!canSubmit\">登&nbsp;&nbsp;&nbsp;&nbsp;录\r\n          </el-button>\r\n        </el-form-item>\r\n\r\n        <div class=\"userBack\">\r\n          <div class=\"userBack-left font-text\">\r\n            <router-link :to=\"{ name: 'Home' }\">返回首页</router-link>\r\n          </div>\r\n          <div class=\"userBack-right font-text\">\r\n            <router-link :to=\"{ name: 'registerView' }\">用户注册</router-link>\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Cookies from 'js-cookie';\r\nimport { userLogin } from '../../service/systemService';\r\nimport { CryAlgorithm } from '../../utils'  //公钥加密函数\r\nimport { mapGetters } from 'vuex'  //获取公钥的相关配置\r\nimport rules from '../../utils/rules'\r\n\r\nexport default {\r\n  name: \"loginView\",\r\n  //App中传入的一个相关的方法,用于帮助进行页面刷新\r\n  inject: ['reload'],\r\n  data() {\r\n    return {\r\n      automaticLogin: false, //自动登录\r\n      showHiddenImg: false,\r\n      changeHiddenImg: false,\r\n      dataForm: {\r\n        username: '', //账号\r\n        password: '', //密码\r\n      },\r\n      checkForm: {\r\n        //用户名校验\r\n        username: [\r\n          { validator: rules.FormValidate.Form().validateUserName, trigger: 'blur' },\r\n        ],\r\n        //密码校验\r\n        password: [\r\n          { validator: rules.FormValidate.Form().validatePassWord, trigger: 'blur' }\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.reload()\r\n  },\r\n  methods: {\r\n    //获取公钥逻辑\r\n    getPublicKey() {\r\n      this.$store.dispatch('encryption/getPubKey');\r\n    },\r\n    //是否自动登录\r\n    submitLogin() {\r\n      this.automaticLogin = !this.automaticLogin;\r\n    },\r\n    //返回首页\r\n    backHome() {\r\n      let location = { name: \"mainHome\" };\r\n      this.$router.push(location);\r\n    },\r\n    //忘记密码\r\n    gotoretrieve() {\r\n      let location = { name: \"retrievePassword\" };\r\n      this.$router.push(location);\r\n    },\r\n    //获取焦点时显示图片\r\n    showImg() {\r\n      this.showHiddenImg = true\r\n    },\r\n    //修改可以查看密码的图片样式\r\n    changeImg() {\r\n      this.changeHiddenImg = !this.changeHiddenImg\r\n    },\r\n    //登录逻辑\r\n    goToLogin(dataForm) {\r\n      this.getPublicKey();\r\n      setTimeout(() => {\r\n        this.$refs[dataForm].validate(valid => {\r\n          //验证通过\r\n          if (valid) {\r\n            if (this.getkeyInfo.encryPtion === '') {\r\n              this.$message.error(\"密码加密失败，请重新点击登录按钮\")\r\n            } else {\r\n              let data = {}\r\n              data.uuId = this.getkeyInfo.uuId\r\n              data.username = this.dataForm.username\r\n              data.password = CryAlgorithm(this.getkeyInfo.encryPtion, this.dataForm.password)\r\n              userLogin(data).then(res => {\r\n                console.log(res);\r\n                if (res.data.code === 200) {\r\n                  Cookies.set('name', res.data.data.user.nickname)\r\n                  const token = res.data.data.token\r\n                  const userImg = res.data.data.user.image\r\n                  const userId = res.data.data.user.userId\r\n                  const nickname = res.data.data.user.nickname\r\n                  const userPhone = res.data.data.user.phone\r\n                  const teacherId = res.data.data.teacherId || 0\r\n                  sessionStorage.setItem('userImg', userImg)\r\n                  sessionStorage.setItem('userId', userId)   //保存正在登录用户的userId\r\n                  sessionStorage.setItem('token', token)    //保存token到本地浏览器\r\n                  sessionStorage.setItem('nickname', nickname)\r\n                  sessionStorage.setItem('userPhone',userPhone)\r\n                  sessionStorage.setItem('teacherId',teacherId)\r\n                  this.$message({\r\n                    message: \"恭喜你，登录成功！欢迎用户: \" + nickname,\r\n                    type: \"success\",\r\n                  })\r\n                  this.$router.push({ name: 'Home' })\r\n                  //刷新页面\r\n                  this.reload()\r\n                } else if (res.data.code === 409) {\r\n                  this.$message.error(res.data.message)\r\n                } else if (res.data.code === 500) {\r\n                  this.$message.error(res.data.message)\r\n                }\r\n              })\r\n            }\r\n          }\r\n          // 验证未通过\r\n          else {\r\n            this.$message.error(\"请按照提示要求修改后再进行登录\")\r\n          }\r\n        })\r\n      }, 1000);\r\n    }\r\n\r\n  },\r\n  computed: {\r\n    //判断提交\r\n    canSubmit() {\r\n      const { username, password } = this.dataForm\r\n      return Boolean(username && password)\r\n    },\r\n    //获取公钥的ID以及公钥的内容\r\n    ...mapGetters('encryption', {\r\n      getkeyInfo: 'getkeyInfo'\r\n    })\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.SystemUserBox {\r\n  margin-top: 60px;\r\n  position: relative;\r\n  height: 440px;\r\n  width: 100%;\r\n  background: url(../../assets/Img/LoginImg/login_img.png) no-repeat 20% 50px #ddd;\r\n\r\n  .loginBox {\r\n    width: 450px;\r\n    height: 350px;\r\n    border-radius: 3px;\r\n    position: absolute;\r\n    right: 14%;\r\n    top: 10%;\r\n    background: #fff;\r\n\r\n    .loginFormTitle {\r\n      margin-top: 10px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      font-size: 22px;\r\n    }\r\n\r\n\r\n    .loginForm {\r\n      z-index: 999;\r\n      position: absolute;\r\n      top: 18%;\r\n      width: 100%;\r\n      padding: 0 20px;\r\n\r\n\r\n      .formData {\r\n        .clickImg {\r\n          display: flex;\r\n          position: absolute;\r\n          right: 60px;\r\n          top: 50%;\r\n          transform: translate(-50%, -50%);\r\n\r\n          .hiddenImg {\r\n            width: 24px;\r\n            height: 24px;\r\n            background: url(../../assets/Img/Icon/hidden1.png) no-repeat center center;\r\n          }\r\n\r\n          .showImg {\r\n            width: 24px;\r\n            height: 24px;\r\n            background: url(../../assets/Img/Icon/show1.png) no-repeat center center;\r\n          }\r\n        }\r\n      }\r\n\r\n      //用户按钮\r\n      .reterieveBtn {\r\n        display: flex;\r\n        justify-content: space-between;\r\n      }\r\n\r\n\r\n\r\n\r\n      .el-form-item {\r\n        margin-bottom: 20px;\r\n      }\r\n\r\n      //选择方式\r\n      .loginSelectNav {\r\n        margin: 10px 0;\r\n        display: flex;\r\n        justify-content: space-between;\r\n\r\n        .navleft {\r\n          margin-left: 30px;\r\n\r\n          .leftbtn {\r\n            display: flex;\r\n\r\n            //未选中状态\r\n            .dashDiv {\r\n              border-radius: 1.8667rem;\r\n              border: 0.03rem solid #cbcbcb;\r\n              background-color: #dad6d6;\r\n              width: 42px;\r\n              height: 16px;\r\n              margin-top: 0.26rem;\r\n              margin-right: 0.4rem;\r\n              box-sizing: border-box;\r\n            }\r\n\r\n            .dashDiv .dashSpan {\r\n              border-radius: 7px;\r\n              border: 0.03rem solid #cbcbcb;\r\n              background-color: #ffffff;\r\n              float: left;\r\n              margin-left: 0.04rem;\r\n              margin-top: 0.019rem;\r\n              width: 24px;\r\n              height: 14px;\r\n              box-sizing: border-box;\r\n            }\r\n\r\n            /*选中状态*/\r\n            .dashDivSelectd {\r\n              background-color: #4cd964;\r\n              transition: 0.5s;\r\n              border-radius: 1.8667rem;\r\n              border: 0.03rem solid #ffffff;\r\n              width: 42px;\r\n              height: 16px;\r\n              margin-top: 0.26rem;\r\n              margin-right: 0.4rem;\r\n              box-sizing: border-box;\r\n            }\r\n\r\n            .dashDivSelectd .dashSpan {\r\n              border-radius: 7px;\r\n              border: 0.03rem solid #ffffff;\r\n              background-color: #ffffff;\r\n              float: right;\r\n              margin-right: 0.04rem;\r\n              margin-top: 0.019rem;\r\n              width: 24px;\r\n              height: 14px;\r\n              box-sizing: border-box;\r\n            }\r\n          }\r\n        }\r\n\r\n        .navright {\r\n          margin-right: 30px;\r\n        }\r\n\r\n        .prompt {\r\n\r\n          margin-top: 1px;\r\n          font-size: 18px;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n\r\n      //选择链接\r\n      .userBack {\r\n        padding-top: 10px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-content: center;\r\n        font-size: 14px;\r\n        line-height: 22px;\r\n\r\n        .userBack-left {\r\n          margin-left: 35px;\r\n\r\n          a {\r\n            color: #666;\r\n          }\r\n        }\r\n\r\n        .userBack-right {\r\n          margin-right: 35px;\r\n          a {\r\n            color: #666;\r\n          }\r\n        }\r\n      }\r\n\r\n      //修改了button的形式\r\n      .el-button {\r\n        padding: 12px 110px;\r\n      }\r\n\r\n      //修改输入框大小\r\n      .el-input {\r\n        left: 5%;\r\n        width: 360px;\r\n      }\r\n    }\r\n  }\r\n\r\n  :deep .el-form-item__error {\r\n    color: #F56C6C;\r\n    font-size: 14px;\r\n    padding: 3px 0;\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 35px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./loginView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./loginView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./loginView.vue?vue&type=template&id=a3bc8352&scoped=true&\"\nimport script from \"./loginView.vue?vue&type=script&lang=js&\"\nexport * from \"./loginView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./loginView.vue?vue&type=style&index=0&id=a3bc8352&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a3bc8352\",\n  null\n  \n)\n\nexport default component.exports","//表单验证的各个参数或者方法\n/*\n * @author 李国强\n * @date 2022/10/23\n * @Description: 校验数据的公共方法\n*/\n// 账号{要求2-12位}\nlet usernameReg = /^[a-zA-Z0-9]{2,12}$/\n\n// 电话{要求11位}\nlet phoneReg = /^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/\n\n// 密码{6-12位}\nlet passwordReg = /^(?=.*[a-zA-Z])(?=.*\\d).{6,12}$/\n\n//验证年龄\nlet ageReg = /^120$|^[1-9]$|^(1[0-1]|[1-9])\\d$/\n\n//验证邮箱 \nlet emailReg = /^[A-Za-z\\d]+([-_.][A-Za-z\\d]+)*@([A-Za-z\\d]+[-.])+[A-Za-z\\d]{2,4}$/\n\n//验证昵称\nlet nicknameReg =  /^[\\u4e00-\\u9fa5a-zA-Z0-9]{2,12}$/\n\n//验证个人留言 \nlet personalMessageReg = /^[\\u4e00-\\u9fa5]{1,20}$/\n\n\nlet FormValidate = (function () {\n  function FormValidate () {}\n  // From表单验证规则  可用于公用的校验部分\n  FormValidate.Form = function () {\n    return {\n      //只用于账号的验证规则\n      validateUserName (rule, value, callback) {\n        if (value === '') {\n          return callback(new Error('请输入账号'))\n        }\n        if (!usernameReg.test(value)) {\n          callback(new Error('账号必须为2-12位(必须包含数字与字母)'))\n        } else {\n          callback()\n        }\n      },\n      //电话号码的验证\n      validatePhone (rule, value, callback) {\n        if (value === '') {\n          return callback(new Error('请输入手机号码'))\n        }\n        if (!phoneReg.test(value)) {\n          callback(new Error('手机格式不正确'))\n        } else {\n          callback()\n          }\n      },\n      //用户密码的验证\n      validatePassWord(rule,value,callback){\n        if(value === ''){\n          return callback(new Error('请输入密码'))\n        }\n        if(!passwordReg.test(value)){\n          callback(new Error('密码为6-12位(必须包含数字和字母)'))\n        }else{\n          callback()\n        }\n      },\n      //只用于年龄的验证规则\n      validataAge (rule, value, callback) {\n        if (value !== '') {\n          if (!ageReg.test(value)) {\n            callback(new Error('年龄的范围为1-120'))\n          } else {\n            callback()\n          }\n        } else {\n          callback('请输入年龄')\n        }\n      },\n      //邮箱的验证规则\n      validateEmail (rule, value, callback) {\n        if (value !== '') {\n          if (!emailReg.test(value)) {\n            console.log(123);\n            callback(new Error('邮箱格式不正确'))\n          } else {\n            callback()\n          }\n        } else {\n          callback(new Error('请输入邮箱'))\n        }\n      },\n      //昵称的验证\n      validateNickName(rule,value,callback){\n        if (value !== '') {\n          if ( !nicknameReg.test(value)) {\n            callback(new Error('格式不对(2-12位(数字,字母,中文))'))\n          } else {\n            callback()\n          }\n        } else {\n          callback(new Error('请输入昵称'))\n        }\n      },\n      //个人留言的验证\n      validatePersonalMessage(rule,value,callback){\n        if (value !== '') {\n          if ( !personalMessageReg.test(value)) {\n            callback(new Error('留言格式不对(2~20)只能是中文'))\n          } else {\n            callback()\n          }\n        } else {\n          callback(new Error('请输入个人留言'))\n        }\n      },\n\n    }\n  }\n  return FormValidate\n}())\n\nexports.FormValidate = FormValidate"],"names":["render","_vm","this","_c","_self","staticClass","_v","ref","attrs","dataForm","checkForm","model","value","username","callback","$$v","$set","trim","expression","changeHiddenImg","on","showImg","password","directives","name","rawName","showHiddenImg","changeImg","class","automaticLogin","submitLogin","gotoretrieve","canSubmit","$event","goToLogin","staticRenderFns","assign","target","i","arguments","length","source","key","defaultConverter","read","slice","replace","decodeURIComponent","write","encodeURIComponent","init","converter","defaultAttributes","set","attributes","document","expires","Date","now","toUTCString","escape","stringifiedAttributes","attributeName","split","cookie","get","cookies","jar","parts","join","foundKey","e","Object","create","remove","withAttributes","withConverter","freeze","api","path","inject","data","validator","trigger","mounted","methods","getPublicKey","backHome","setTimeout","userLogin","console","Cookies","sessionStorage","message","type","computed","getkeyInfo","component","usernameReg","phoneReg","passwordReg","ageReg","emailReg","nicknameReg","personalMessageReg","FormValidate","Form","validateUserName","rule","Error","test","validatePhone","validatePassWord","validataAge","validateEmail","log","validateNickName","validatePersonalMessage","exports"],"sourceRoot":""}