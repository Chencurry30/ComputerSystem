(self["webpackChunkweb_7"]=self["webpackChunkweb_7"]||[]).push([[735],{1187:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"getVerificationCode",on:{click:e.getVerCode}},[e._v(" "+e._s(e.verificationCodeInfo)+" ")])},a=[],o=r(2694),i={props:["phone"],name:"sendCodeBtn",data(){return{sendTimeCode:30,bVerification:!1,verificationCodeInfo:"发送验证码"}},methods:{getVerCode(){if(""===this.phone)return;if(!0===this.bVerification)return;this.bVerification=!0;let e=setInterval((()=>{this.sendTimeCode-=1,this.verificationCodeInfo=`${this.sendTimeCode}秒后发送`,this.sendTimeCode<=0&&(this.verificationCodeInfo="发送验证码",this.sendTimeCode=30,clearInterval(e),this.bVerification=!1)}),1e3),t={phone:this.phone};(0,o.TG)(t).then((e=>{console.log(e.data.code),414===e.data.code?this.$message.error("手机号为空，请输入手机号"):413===e.data.code?this.$message.error("手机号已注册，请输入新的手机号"):200===e.data.code&&this.$message({message:"验证码已发送，请注意查收",type:"success"})}))}}},n=i,d=r(3736),m=(0,d.Z)(n,s,a,!1,null,"51e63a14",null),c=m.exports},7735:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"SystemUserBox"},[t("div",{staticClass:"registerBox"},[t("div",{staticClass:"registerFormTitle"},[e._v("用户注册")]),t("el-form",{ref:"dataForm",staticClass:"registerForm",attrs:{"label-width":"0px",model:e.dataForm,rules:e.checkForm}},[t("div",{staticClass:"formData"},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{type:"text","prefix-icon":"el-icon-user",placeholder:"请输入账号"},model:{value:e.dataForm.username,callback:function(t){e.$set(e.dataForm,"username","string"===typeof t?t.trim():t)},expression:"dataForm.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:!0===e.changeHiddenImg?"text":"password","prefix-icon":"el-icon-thumb",placeholder:"请输入密码"},on:{focus:e.showImg},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password","string"===typeof t?t.trim():t)},expression:"dataForm.password"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showHiddenImg,expression:"showHiddenImg"}],staticClass:"clickImg",on:{click:e.changeImg}},[t("div",{class:!0===e.changeHiddenImg?"showImg":"hiddenImg"})])],1),t("el-form-item",{attrs:{prop:"phone"}},[t("el-input",{attrs:{"label-width":"100px",type:"text","prefix-icon":"el-icon-user",placeholder:"请输入手机号"},model:{value:e.dataForm.phone,callback:function(t){e.$set(e.dataForm,"phone","string"===typeof t?t.trim():t)},expression:"dataForm.phone"}})],1),t("el-form-item",{staticClass:"verification",attrs:{prop:"smsCode"}},[t("el-input",{attrs:{type:"text","prefix-icon":"el-icon-thumb",placeholder:"请输入验证码"},model:{value:e.dataForm.smsCode,callback:function(t){e.$set(e.dataForm,"smsCode","string"===typeof t?t.trim():t)},expression:"dataForm.smsCode"}}),t("SendCodeBtn",{attrs:{phone:this.dataForm.phone}})],1)],1),t("el-form-item",{staticClass:"reterieveBtn"},[t("el-button",{attrs:{type:"primary",disabled:!e.canRegister},on:{click:e.goToRegister}},[e._v("注    册 ")])],1),t("div",{staticClass:"userBack"},[t("div",{staticClass:"userBack-left font-text"},[t("router-link",{attrs:{to:{name:"Home"}}},[e._v("返回首页")])],1),t("div",{staticClass:"userBack-right font-text"},[t("router-link",{attrs:{to:{name:"loginView"}}},[e._v("用户登录")])],1)])],1)],1)])},a=[],o=r(2694),i=r(1187),n=r(2325),d=r(3822),m=r(6310),c={name:"registerView",data(){return{showHiddenImg:!1,changeHiddenImg:!1,dataForm:{username:"",password:"",phone:"",smsCode:""},checkForm:{username:[{validator:m.y.Form().validateUserName,trigger:"blur"}],password:[{validator:m.y.Form().validatePassWord,trigger:"blur"}],phone:[{validator:m.y.Form().validatePhone,trigger:"blur"}]}}},components:{SendCodeBtn:i.Z},computed:{canRegister(){const{username:e,password:t}=this.dataForm;return Boolean(e&&t)},...(0,d.Se)("encryption",{getkeyInfo:"getkeyInfo"})},methods:{submitLogin(){this.automaticLogin=!this.automaticLogin},goToRegister(){let e={};e.username=this.dataForm.username,e.password=(0,n.ry)(this.getkeyInfo.encryPtion,this.dataForm.password),e.phone=this.dataForm.phone,e.smsCode=this.dataForm.smsCode,e.uuId=this.getkeyInfo.uuId,(0,o.N$)(e).then((e=>{200===e.data.code?(this.$message({message:"恭喜你，注册成功！请登录",type:"success"}),this.$router.push({name:"loginView"})):201===e.data.code&&(this.$message.error("用户名重复，请重新输入！"),this.dataForm={username:"",password:"",phone:"",smsCode:""})}))},showImg(){this.showHiddenImg=!0},changeImg(){console.log(this.changeHiddenImg),this.changeHiddenImg=!this.changeHiddenImg}},mounted(){this.$store.dispatch("encryption/getPubKey")}},l=c,h=r(3736),u=(0,h.Z)(l,s,a,!1,null,"62e7230a",null),p=u.exports},6310:function(e,t){let r=/^[a-zA-Z0-9]{2,12}$/,s=/^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/,a=/^(?=.*[a-zA-Z])(?=.*\d).{6,12}$/,o=/^120$|^[1-9]$|^(1[0-1]|[1-9])\d$/,i=/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/,n=/^[\u4e00-\u9fa5a-zA-Z0-9]{2,12}$/,d=/^[\u4e00-\u9fa5]{1,20}$/,m=function(){function e(){}return e.Form=function(){return{validateUserName(e,t,s){if(""===t)return s(new Error("请输入账号"));r.test(t)?s():s(new Error("账号必须为2-12位(必须包含数字与字母)"))},validatePhone(e,t,r){if(""===t)return r(new Error("请输入手机号码"));s.test(t)?r():r(new Error("手机格式不正确"))},validatePassWord(e,t,r){if(""===t)return r(new Error("请输入密码"));a.test(t)?r():r(new Error("密码为6-12位(必须包含数字和字母)"))},validataAge(e,t,r){""!==t?o.test(t)?r():r(new Error("年龄的范围为1-120")):r("请输入年龄")},validateEmail(e,t,r){""!==t?i.test(t)?r():(console.log(123),r(new Error("邮箱格式不正确"))):r(new Error("请输入邮箱"))},validateNickName(e,t,r){""!==t?n.test(t)?r():r(new Error("格式不对(2-12位(数字,字母,中文))")):r(new Error("请输入昵称"))},validatePersonalMessage(e,t,r){""!==t?d.test(t)?r():r(new Error("留言格式不对(2~20)只能是中文")):r(new Error("请输入个人留言"))}}},e}();t.y=m}}]);
//# sourceMappingURL=735.70823b8b.js.map