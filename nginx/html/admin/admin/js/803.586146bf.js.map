{"version":3,"file":"js/803.586146bf.js","mappings":"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","sources":["webpack://admin/./src/components/permissManage/GiveRole.vue","webpack://admin/src/components/permissManage/GiveRole.vue","webpack://admin/./src/components/permissManage/GiveRole.vue?8a23","webpack://admin/./src/components/permissManage/GiveRole.vue?0220","webpack://admin/./src/components/permissManage/addUserpopUp.vue","webpack://admin/src/components/permissManage/addUserpopUp.vue","webpack://admin/./src/components/permissManage/addUserpopUp.vue?79b7","webpack://admin/./src/components/permissManage/addUserpopUp.vue?c4cf","webpack://admin/./src/views/systemManage/theLogManage.vue","webpack://admin/src/views/systemManage/theLogManage.vue","webpack://admin/./src/views/systemManage/theLogManage.vue?d6ba","webpack://admin/./src/views/systemManage/theLogManage.vue?5b04","webpack://admin/./src/services/systemManage.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home\"},[_c('el-dialog',{attrs:{\"title\":_vm.title,\"append-to-body\":\"\",\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticStyle:{\"margin\":\"15px 0\"}}),_c('el-checkbox-group',{model:{value:(_vm.userCheckList),callback:function ($$v) {_vm.userCheckList=$$v},expression:\"userCheckList\"}},_vm._l((_vm.roleList),function(role){return _c('el-checkbox',{key:role.roleId,attrs:{\"label\":role.roleId}},[_vm._v(_vm._s(role.name))])}),1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.closeDialogVisible()}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.subminRole()}}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--将角色给用户-->\r\n<template>\r\n  <div class=\"home\">\r\n    <el-dialog :title=\"title\" append-to-body :visible.sync=\"dialogVisible\">\r\n      <div style=\"margin: 15px 0;\"></div>\r\n      <el-checkbox-group v-model=\"userCheckList\">\r\n        <el-checkbox v-for=\"role in roleList\" :label=\"role.roleId\" :key=\"role.roleId\">{{ role.name }}</el-checkbox>\r\n      </el-checkbox-group>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"closeDialogVisible()\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"subminRole()\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getRoleList, renewRole, userRole } from '../../services/systemManage'\r\nexport default {\r\n  name: 'GiveRole',\r\n  data() {\r\n    return {\r\n      form: {},\r\n      dialogVisible: false,\r\n      activeName: 'first',\r\n      title: '选择角色',\r\n      userCheckList: [],\r\n      roleList: [],\r\n    }\r\n  },\r\n  methods: {\r\n    //返回所有的角色集合 \r\n    getAllRole() {\r\n      getRoleList().then((res) => {\r\n        console.log(res);\r\n        this.roleList = res.data.data //获取后台角色\r\n      })\r\n    },\r\n    //返回用户的角色 \r\n    getUserRole(fatherItem) {\r\n      this.userCheckList = []\r\n      userRole(fatherItem.userId).then((res) => {\r\n        let list = res.data.data\r\n        list.forEach(item => {\r\n          this.userCheckList[this.userCheckList.length++] = item.roleId\r\n        });\r\n        this.userCheckList =  Object.values( this.userCheckList)\r\n      })\r\n    },\r\n    // 显示弹窗\r\n    showGiveRoles(fatherItem) {\r\n      this.userId = fatherItem.userId\r\n      this.getAllRole()                    //获取所有的角色列表\r\n      this.getUserRole(fatherItem)       //获取用户目前拥有的角色列表\r\n      this.dialogVisible = true\r\n    },\r\n    //关闭弹窗\r\n    closeDialogVisible() {\r\n      this.dialogVisible = false\r\n    },\r\n    //提交角色\r\n    subminRole() {\r\n      let data = {}\r\n      data.userId = this.userId\r\n      data.roleList = []\r\n      this.userCheckList.forEach(item=>{\r\n        let roleData = {\r\n          roleId:item\r\n        }\r\n        data.roleList.push(roleData)\r\n      })\r\n      //更新用户角色 \r\n      renewRole(data).then((res) => {\r\n        console.log(res);\r\n        if (res.data.code === 200) {\r\n          this.dialogVisible = false //关闭弹窗\r\n          this.$parent.getFollowdiaryList() //相当于刷新列表，重新获取了一遍用户信息\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-input {\r\n  width: 150px;\r\n  margin: 15px 5px 10px 20px;\r\n}\r\n\r\n.xz {\r\n  margin-left: 20px;\r\n}\r\n\r\n.el-radio-group {\r\n  margin-left: 50px;\r\n  margin-bottom: 10px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.top {\r\n  margin-top: -40px;\r\n}\r\n\r\n.xz1 {\r\n  margin-bottom: 10px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GiveRole.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GiveRole.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GiveRole.vue?vue&type=template&id=b9fc6ec2&scoped=true&\"\nimport script from \"./GiveRole.vue?vue&type=script&lang=js&\"\nexport * from \"./GiveRole.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GiveRole.vue?vue&type=style&index=0&id=b9fc6ec2&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b9fc6ec2\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"addRoleBox\"},[_c('el-dialog',{attrs:{\"title\":\"新增用户\",\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"dataForm\",staticClass:\"login_in\",attrs:{\"label-width\":\"0px\",\"model\":_vm.dataForm,\"rules\":_vm.checkForm}},[_c('div',{staticClass:\"form-info\"},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"prefix-icon\":\"el-icon-user\",\"placeholder\":\"请输入用户用户名\"},model:{value:(_vm.dataForm.username),callback:function ($$v) {_vm.$set(_vm.dataForm, \"username\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"dataForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"email\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-user\",\"placeholder\":\"请输入用户邮箱\"},model:{value:(_vm.dataForm.email),callback:function ($$v) {_vm.$set(_vm.dataForm, \"email\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"dataForm.email\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"age\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"prefix-icon\":\"el-icon-user\",\"placeholder\":\"请输入用户年龄\"},model:{value:(_vm.dataForm.age),callback:function ($$v) {_vm.$set(_vm.dataForm, \"age\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"dataForm.age\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"sex\"}},[_c('el-select',{model:{value:(_vm.dataForm.sex),callback:function ($$v) {_vm.$set(_vm.dataForm, \"sex\", $$v)},expression:\"dataForm.sex\"}},[_c('el-option',{attrs:{\"label\":\"女\",\"value\":\"女\"}}),_c('el-option',{attrs:{\"label\":\"男\",\"value\":\"男\"}}),_c('el-option',{attrs:{\"label\":\"保密\",\"value\":\"保密\"}})],1)],1)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.closeDialogVisible}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.showDialogVisible,_vm.submit()}}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"addRoleBox\">\r\n      <el-dialog\r\n        title=\"新增用户\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"30%\" center>\r\n        <el-form label-width=\"0px\" class=\"login_in\"  ref=\"dataForm\" :model=\"dataForm\" :rules=\"checkForm\">\r\n          <div class=\"form-info\">\r\n            <el-form-item prop=\"username\">\r\n              <el-input\r\n                type=\"text\"\r\n                prefix-icon=\"el-icon-user\"\r\n                placeholder=\"请输入用户用户名\"\r\n                v-model.trim=\"dataForm.username\">\r\n              </el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"email\">\r\n              <el-input\r\n              prefix-icon=\"el-icon-user\"\r\n                placeholder=\"请输入用户邮箱\"\r\n                v-model.trim=\"dataForm.email\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"age\">\r\n              <el-input\r\n                type=\"text\"\r\n                prefix-icon=\"el-icon-user\"\r\n                placeholder=\"请输入用户年龄\"\r\n                v-model.trim=\"dataForm.age\">\r\n              </el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"sex\">\r\n            <el-select v-model=\"dataForm.sex\">\r\n              <el-option label=\"女\" value=\"女\"></el-option>\r\n              <el-option label=\"男\" value=\"男\"></el-option>\r\n              <el-option label=\"保密\" value=\"保密\"></el-option>\r\n            </el-select>\r\n    </el-form-item>\r\n          </div>\r\n        </el-form>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"closeDialogVisible\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"showDialogVisible,submit()\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import rules from '@/utils/rules'\r\n  import {addUser} from '@/services/systemManage'\r\n    export default {\r\n      name:'addRolepopUp',\r\n      data() {\r\n        return {\r\n          dataForm:{\r\n            username:'',\r\n            email:'',\r\n            age:'',\r\n            sex:'保密'\r\n          },\r\n          dialogVisible: false,\r\n          checkForm:{\r\n          //用户名校验\r\n          username:[\r\n            {validator: rules.FormValidate.Form().validateUserName,trigger:'blur'}\r\n          ],\r\n          //邮箱校验\r\n          email:[\r\n            {validator: rules.FormValidate.Form().validateEmail,trigger:'blur'}\r\n          ],\r\n          //年龄校验\r\n          age:[\r\n            {validator: rules.FormValidate.Form().validataAge,trigger:'blur'}\r\n          ],\r\n        },\r\n        };\r\n      },\r\n      methods:{\r\n        closeDialogVisible(){\r\n          this.dialogVisible = false\r\n        },\r\n        showDialogVisible(){\r\n           this.dialogVisible = !this.dialogVisible\r\n        },\r\n        submit(){\r\n          let data = {}\r\n          data.username = this.dataForm.username\r\n          data.email = this.dataForm.email\r\n          data.age = (this.dataForm.age)\r\n          data.sex = this.dataForm.sex\r\n          addUser(data).then((res)=>{\r\n            if(res.data.code === 200){\r\n                this.$message({\r\n                    message: \"添加用户成功！\",\r\n                    type: \"success\",\r\n                })\r\n                this.dialogVisible = false  //关闭弹窗\r\n                this.$parent.getFollowdiaryList() //刷新页面\r\n            }else if(res.data.code === 411){\r\n                this.$message({\r\n                    message: \"用户名重复！\",\r\n                    type: \"error\",\r\n                })\r\n            }else if(res.data.code === 406){\r\n              this.$message({\r\n                message:res.data.message,\r\n                type:\"error\"\r\n              })\r\n            }\r\n          })\r\n        }\r\n      }\r\n    };\r\n  </script>\r\n  <style>\r\n  \r\n  </style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./addUserpopUp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./addUserpopUp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addUserpopUp.vue?vue&type=template&id=8b3ddc66&\"\nimport script from \"./addUserpopUp.vue?vue&type=script&lang=js&\"\nexport * from \"./addUserpopUp.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home\"},[_vm._v(\"` \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData},on:{\"selection-change\":_vm.deleteLog}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"用户名\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"ip\",\"label\":\"ip\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"createDate\",\"label\":\"事件时间\",\"width\":\"190\"}}),_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"事件类型\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"model\",\"label\":\"事件种类\"}}),_c('el-table-column',{attrs:{\"prop\":\"result\",\"label\":\"事件结果\"}}),_c('el-table-column',{attrs:{\"prop\":\"description\",\"label\":\"事件注释\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"has\",rawName:\"v-has\",value:(`system:log:delete`),expression:\"`system:log:delete`\"}],attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteROW(scope.row)}}})]}}])})],1),_c('el-pagination',{staticClass:\"page\",attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.total,\"page-size\":_vm.pageSize},on:{\"current-change\":_vm.handleCurrentChange}}),_c('el-button',{directives:[{name:\"has\",rawName:\"v-has\",value:(`system:log:delete`),expression:\"`system:log:delete`\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.deleteBtn(_vm.selections)}}},[_vm._v(\" 批量删除 \")]),_c('GiveRole',{ref:\"GiveRole\"}),_c('addUserpopUp',{ref:\"addUserpopUp\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--日志管理-->\r\n<template>\r\n  <div class=\"home\">\r\n    <!--主题-->`\r\n    <el-table :data=\"tableData\" style=\"width: 100%\" @selection-change=\"deleteLog\">\r\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n      <el-table-column prop=\"username\" label=\"用户名\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"ip\" label=\"ip\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"createDate\" label=\"事件时间\" width=\"190\"></el-table-column>\r\n      <el-table-column prop=\"type\" label=\"事件类型\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"model\" label=\"事件种类\"></el-table-column>\r\n      <el-table-column prop=\"result\" label=\"事件结果\"></el-table-column>\r\n      <el-table-column prop=\"description\" label=\"事件注释\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"150\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"danger\" icon=\"el-icon-delete\" circle size=\"mini\" @click=\"deleteROW(scope.row)\" v-has=\"`system:log:delete`\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 批量删除日志 -->\r\n\r\n    <!--分页表单-->\r\n    <el-pagination background layout=\"prev, pager, next\" :total=\"total\" :page-size=\"pageSize\"\r\n      @current-change=\"handleCurrentChange\" class=\"page\">\r\n    </el-pagination>\r\n    <el-button type=\"primary\" icon=\"el-icon-delete\" @click=\"deleteBtn(selections)\" v-has=\"`system:log:delete`\">\r\n      批量删除\r\n    </el-button>\r\n    <!--提示框的组件-->\r\n    <GiveRole ref=\"GiveRole\"></GiveRole>\r\n    <addUserpopUp ref=\"addUserpopUp\"></addUserpopUp>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GiveRole from \"../../components/permissManage/GiveRole\";\r\nimport addUserpopUp from \"../../components/permissManage/addUserpopUp.vue\";\r\nimport { getLoglist, logDelete, logsDelete } from \"../../services/systemManage\";\r\nexport default {\r\n  name: \"MemberArchive\",\r\n  data() {\r\n    return {\r\n      //根据后端所川回的值\r\n      tableData: [\r\n        {\r\n          logId: \"\",\r\n          username: \"\",\r\n          ip: \"\",\r\n          createDate: \"\",\r\n          type: \"\",\r\n          model: \"\",\r\n          result: \"\",\r\n          description: \"\",\r\n          total: \"\",\r\n          pageSize: \"\",\r\n        },\r\n      ],\r\n      total: 0, //页面总条数\r\n      page: 1, //请求第一次的params\r\n      pageSize: 0,\r\n      selections: [],\r\n    };\r\n  },\r\n  components: { GiveRole, addUserpopUp },\r\n  mounted() {\r\n    this.getFollowdiaryList();\r\n  },\r\n  methods: {\r\n    //获取所有列表的信息\r\n    getFollowdiaryList() {\r\n      getLoglist(this.page).then((res) => {\r\n        this.tableData = res.data.data.list; //后端返回的值赋值给页面\r\n        this.total = res.data.data.total; //后端返回的总数量\r\n        this.pageSize = res.data.data.pageSize; //后端放回每页总条数\r\n      });\r\n    },\r\n    //分页\r\n    handleCurrentChange(page) {\r\n      this.page = page;\r\n      this.getFollowdiaryList();\r\n    },\r\n    //删除列表\r\n    deleteROW(row) {\r\n      this.$confirm(\"此操作将永久删除该文件, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          logDelete(row.logId)\r\n            .then(() => {\r\n              this.$message({\r\n                message: \"删除用户成功！\",\r\n                type: \"success\",\r\n              });\r\n              this.getFollowdiaryList(); //更新列表\r\n            })\r\n            .catch(() => {\r\n              console.log(\"错误捕获\");\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\",\r\n          });\r\n        });\r\n    },\r\n    //批量删除\r\n    deleteBtn(data) {\r\n      this.$confirm(\"此操作将永久删除该文件, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          logsDelete(data)\r\n            .then(() => {\r\n              this.$message({\r\n                message: \"删除用户成功！\",\r\n                type: \"success\",\r\n              });\r\n              this.getFollowdiaryList(); //更新列表\r\n            })\r\n            .catch(() => {\r\n              console.log(\"错误捕获\");\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\",\r\n          });\r\n        });\r\n    },\r\n    deleteLog(val) {\r\n      this.selections = val;\r\n      // console.log(this.selections);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.nav-select {\r\n  margin: 10px 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.nav-right {\r\n  display: flex;\r\n}\r\n\r\n.searchData {\r\n  margin-left: 10px;\r\n}\r\n\r\n.page {\r\n  margin-top: 10px;\r\n\r\n  text-align: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./theLogManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./theLogManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./theLogManage.vue?vue&type=template&id=eb55724a&scoped=true&\"\nimport script from \"./theLogManage.vue?vue&type=script&lang=js&\"\nexport * from \"./theLogManage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./theLogManage.vue?vue&type=style&index=0&id=eb55724a&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"eb55724a\",\n  null\n  \n)\n\nexport default component.exports","import servers from './service'\r\n//获取角色列表 \r\nexport const getRoleList = () =>{\r\n  const url = '/admin/roles'\r\n  return servers.get(url)\r\n}\r\n//添加角色 \r\nexport const addRole = (data) =>{\r\n  const url = '/admin/roles'\r\n  return servers.post(url,data)\r\n}\r\n\r\n//查看一个角色的权限 \r\nexport const lookRole = (RoleId) =>{\r\n  const url = `/admin/roles/menu/${RoleId}`\r\n  return servers.get(url)\r\n}\r\n\r\n//获取所有权限树形结构\r\nexport const getTree = () =>{\r\n  const url = `/admin/menus/tree`\r\n  return servers.get(url)\r\n}\r\n\r\n//保存修改后的角色权限\r\nexport const saveTree = (data) =>{\r\n  const url = '/admin/roles/menu'\r\n  return servers.put(url,data,)\r\n}\r\n\r\n//删除一个角色\r\nexport const roleDelete = (roleId) =>{\r\n  const url = `/admin/roles/${roleId}`\r\n  return servers.delete(url)\r\n}\r\n//获取分页的相关数据\r\nexport const getuserListApi = (params) =>{\r\n  const url = `/admin/users/pages/${params}`\r\n  return servers.get(url)\r\n} \r\n//更新用户角色\r\nexport const renewRole = (data) =>{\r\n  const url = '/admin/users/role'\r\n  return servers.put(url,data)\r\n}\r\n//删除用户（根据id进行删除）\r\nexport const userDelete = (userId) =>{\r\n  const url = `/admin/users/${userId}`\r\n  return servers.delete(url)\r\n}\r\n//添加一个用户\r\nexport const addUser = (data) =>{\r\n  const url = `/admin/users`\r\n  return servers.post(url,data)\r\n}\r\n//获取日志列表\r\nexport const getLoglist = (params) =>{\r\n  const url = `/admin/logs/pages/${params}`\r\n  return servers.get(url)\r\n} \r\n\r\n\r\n//删除日子（根据id进行删除）\r\nexport const logDelete = (userId) =>{\r\n  const url = `/admin/logs/${userId}`\r\n  return servers.delete(url)\r\n}\r\n\r\n//批量删除\r\nexport const logsDelete = (data) =>{\r\n  const url = `/admin/logs`\r\n  return servers.post(url,data)\r\n}\r\n\r\n//查找指定用户校色（根据id进行删除）\r\nexport const userRole = (userId) =>{\r\n  const url = `/admin/users/role/${userId}`\r\n  return servers.get(url)\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","title","dialogVisible","on","$event","staticStyle","model","value","userCheckList","callback","$$v","expression","_l","roleList","role","key","roleId","_v","_s","name","slot","closeDialogVisible","subminRole","staticRenderFns","data","form","activeName","methods","getAllRole","getRoleList","console","getUserRole","userRole","list","showGiveRoles","renewRole","component","ref","dataForm","checkForm","username","$set","trim","email","age","sex","showDialogVisible","submit","validator","trigger","addUser","message","type","tableData","deleteLog","scopedSlots","_u","fn","scope","directives","rawName","deleteROW","row","total","pageSize","handleCurrentChange","deleteBtn","selections","logId","ip","createDate","result","description","page","components","GiveRole","addUserpopUp","mounted","getFollowdiaryList","getLoglist","confirmButtonText","cancelButtonText","then","logDelete","catch","logsDelete","url","servers","addRole","lookRole","RoleId","getTree","saveTree","roleDelete","getuserListApi","params","userDelete","userId"],"sourceRoot":""}