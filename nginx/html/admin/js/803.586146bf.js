"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[803],{5449:function(e,t,a){a.d(t,{Z:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("el-dialog",{attrs:{title:e.title,"append-to-body":"",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{margin:"15px 0"}}),t("el-checkbox-group",{model:{value:e.userCheckList,callback:function(t){e.userCheckList=t},expression:"userCheckList"}},e._l(e.roleList,(function(a){return t("el-checkbox",{key:a.roleId,attrs:{label:a.roleId}},[e._v(e._s(a.name))])})),1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.closeDialogVisible()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.subminRole()}}},[e._v("确 定")])],1)],1)],1)},i=[],l=(a(7658),a(8729)),o={name:"GiveRole",data(){return{form:{},dialogVisible:!1,activeName:"first",title:"选择角色",userCheckList:[],roleList:[]}},methods:{getAllRole(){(0,l.JV)().then((e=>{console.log(e),this.roleList=e.data.data}))},getUserRole(e){this.userCheckList=[],(0,l.xZ)(e.userId).then((e=>{let t=e.data.data;t.forEach((e=>{this.userCheckList[this.userCheckList.length++]=e.roleId})),this.userCheckList=Object.values(this.userCheckList)}))},showGiveRoles(e){this.userId=e.userId,this.getAllRole(),this.getUserRole(e),this.dialogVisible=!0},closeDialogVisible(){this.dialogVisible=!1},subminRole(){let e={};e.userId=this.userId,e.roleList=[],this.userCheckList.forEach((t=>{let a={roleId:t};e.roleList.push(a)})),(0,l.e1)(e).then((e=>{console.log(e),200===e.data.code&&(this.dialogVisible=!1,this.$parent.getFollowdiaryList())}))}}},r=o,n=a(1001),c=(0,n.Z)(r,s,i,!1,null,"b9fc6ec2",null),u=c.exports},3784:function(e,t,a){a.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"addRoleBox"},[t("el-dialog",{attrs:{title:"新增用户",visible:e.dialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"dataForm",staticClass:"login_in",attrs:{"label-width":"0px",model:e.dataForm,rules:e.checkForm}},[t("div",{staticClass:"form-info"},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{type:"text","prefix-icon":"el-icon-user",placeholder:"请输入用户用户名"},model:{value:e.dataForm.username,callback:function(t){e.$set(e.dataForm,"username","string"===typeof t?t.trim():t)},expression:"dataForm.username"}})],1),t("el-form-item",{attrs:{prop:"email"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入用户邮箱"},model:{value:e.dataForm.email,callback:function(t){e.$set(e.dataForm,"email","string"===typeof t?t.trim():t)},expression:"dataForm.email"}})],1),t("el-form-item",{attrs:{prop:"age"}},[t("el-input",{attrs:{type:"text","prefix-icon":"el-icon-user",placeholder:"请输入用户年龄"},model:{value:e.dataForm.age,callback:function(t){e.$set(e.dataForm,"age","string"===typeof t?t.trim():t)},expression:"dataForm.age"}})],1),t("el-form-item",{attrs:{prop:"sex"}},[t("el-select",{model:{value:e.dataForm.sex,callback:function(t){e.$set(e.dataForm,"sex",t)},expression:"dataForm.sex"}},[t("el-option",{attrs:{label:"女",value:"女"}}),t("el-option",{attrs:{label:"男",value:"男"}}),t("el-option",{attrs:{label:"保密",value:"保密"}})],1)],1)],1)]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.closeDialogVisible}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showDialogVisible,e.submit()}}},[e._v("确 定")])],1)],1)],1)},i=[],l=a(6310),o=a(8729),r={name:"addRolepopUp",data(){return{dataForm:{username:"",email:"",age:"",sex:"保密"},dialogVisible:!1,checkForm:{username:[{validator:l.y.Form().validateUserName,trigger:"blur"}],email:[{validator:l.y.Form().validateEmail,trigger:"blur"}],age:[{validator:l.y.Form().validataAge,trigger:"blur"}]}}},methods:{closeDialogVisible(){this.dialogVisible=!1},showDialogVisible(){this.dialogVisible=!this.dialogVisible},submit(){let e={};e.username=this.dataForm.username,e.email=this.dataForm.email,e.age=this.dataForm.age,e.sex=this.dataForm.sex,(0,o.cn)(e).then((e=>{200===e.data.code?(this.$message({message:"添加用户成功！",type:"success"}),this.dialogVisible=!1,this.$parent.getFollowdiaryList()):411===e.data.code?this.$message({message:"用户名重复！",type:"error"}):406===e.data.code&&this.$message({message:e.data.message,type:"error"})}))}}},n=r,c=a(1001),u=(0,c.Z)(n,s,i,!1,null,null,null),d=u.exports},6803:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[e._v("` "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.deleteLog}},[t("el-table-column",{attrs:{type:"selection",width:"55"}}),t("el-table-column",{attrs:{prop:"username",label:"用户名",width:"120"}}),t("el-table-column",{attrs:{prop:"ip",label:"ip",width:"120"}}),t("el-table-column",{attrs:{prop:"createDate",label:"事件时间",width:"190"}}),t("el-table-column",{attrs:{prop:"type",label:"事件类型",width:"120"}}),t("el-table-column",{attrs:{prop:"model",label:"事件种类"}}),t("el-table-column",{attrs:{prop:"result",label:"事件结果"}}),t("el-table-column",{attrs:{prop:"description",label:"事件注释"}}),t("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{directives:[{name:"has",rawName:"v-has",value:"system:log:delete",expression:"`system:log:delete`"}],attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){return e.deleteROW(a.row)}}})]}}])})],1),t("el-pagination",{staticClass:"page",attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize},on:{"current-change":e.handleCurrentChange}}),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"system:log:delete",expression:"`system:log:delete`"}],attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(t){return e.deleteBtn(e.selections)}}},[e._v(" 批量删除 ")]),t("GiveRole",{ref:"GiveRole"}),t("addUserpopUp",{ref:"addUserpopUp"})],1)},i=[],l=a(5449),o=a(3784),r=a(8729),n={name:"MemberArchive",data(){return{tableData:[{logId:"",username:"",ip:"",createDate:"",type:"",model:"",result:"",description:"",total:"",pageSize:""}],total:0,page:1,pageSize:0,selections:[]}},components:{GiveRole:l.Z,addUserpopUp:o.Z},mounted(){this.getFollowdiaryList()},methods:{getFollowdiaryList(){(0,r.EJ)(this.page).then((e=>{this.tableData=e.data.data.list,this.total=e.data.data.total,this.pageSize=e.data.data.pageSize}))},handleCurrentChange(e){this.page=e,this.getFollowdiaryList()},deleteROW(e){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,r.W1)(e.logId).then((()=>{this.$message({message:"删除用户成功！",type:"success"}),this.getFollowdiaryList()})).catch((()=>{console.log("错误捕获")}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},deleteBtn(e){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,r.q0)(e).then((()=>{this.$message({message:"删除用户成功！",type:"success"}),this.getFollowdiaryList()})).catch((()=>{console.log("错误捕获")}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},deleteLog(e){this.selections=e}}},c=n,u=a(1001),d=(0,u.Z)(c,s,i,!1,null,"eb55724a",null),m=d.exports},8729:function(e,t,a){a.d(t,{DZ:function(){return m},EJ:function(){return g},Fe:function(){return c},IM:function(){return r},JV:function(){return i},W1:function(){return h},Xu:function(){return u},Y2:function(){return n},_d:function(){return l},cn:function(){return p},e1:function(){return d},pR:function(){return o},q0:function(){return f},xZ:function(){return b}});var s=a(4498);const i=()=>{const e="/admin/roles";return s.Z.get(e)},l=e=>{const t="/admin/roles";return s.Z.post(t,e)},o=e=>{const t=`/admin/roles/menu/${e}`;return s.Z.get(t)},r=()=>{const e="/admin/menus/tree";return s.Z.get(e)},n=e=>{const t="/admin/roles/menu";return s.Z.put(t,e)},c=e=>{const t=`/admin/roles/${e}`;return s.Z["delete"](t)},u=e=>{const t=`/admin/users/pages/${e}`;return s.Z.get(t)},d=e=>{const t="/admin/users/role";return s.Z.put(t,e)},m=e=>{const t=`/admin/users/${e}`;return s.Z["delete"](t)},p=e=>{const t="/admin/users";return s.Z.post(t,e)},g=e=>{const t=`/admin/logs/pages/${e}`;return s.Z.get(t)},h=e=>{const t=`/admin/logs/${e}`;return s.Z["delete"](t)},f=e=>{const t="/admin/logs";return s.Z.post(t,e)},b=e=>{const t=`/admin/users/role/${e}`;return s.Z.get(t)}}}]);
//# sourceMappingURL=803.586146bf.js.map