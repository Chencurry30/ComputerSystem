{"version":3,"file":"js/718.b2bd2f18.js","mappings":"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","sources":["webpack://demo/./src/components/permissManage/GiveRole.vue?e871","webpack://demo/src/components/permissManage/GiveRole.vue","webpack://demo/./src/components/permissManage/GiveRole.vue?8a12","webpack://demo/./src/components/permissManage/GiveRole.vue","webpack://demo/./src/components/permissManage/addUserpopUp.vue?8b97","webpack://demo/src/components/permissManage/addUserpopUp.vue","webpack://demo/./src/components/permissManage/addUserpopUp.vue?9d44","webpack://demo/./src/components/permissManage/addUserpopUp.vue","webpack://demo/./src/views/systemManage/theLogManage.vue?771d","webpack://demo/src/views/systemManage/theLogManage.vue","webpack://demo/./src/views/systemManage/theLogManage.vue?6c2c","webpack://demo/./src/views/systemManage/theLogManage.vue","webpack://demo/./src/services/systemManage.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('el-dialog',{attrs:{\"title\":_vm.title,\"append-to-body\":\"\",\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticStyle:{\"margin\":\"15px 0\"}}),_c('el-checkbox-group',{model:{value:(_vm.userCheckList),callback:function ($$v) {_vm.userCheckList=$$v},expression:\"userCheckList\"}},_vm._l((_vm.roleList),function(role){return _c('el-checkbox',{key:role.roleId,attrs:{\"label\":role.roleId}},[_vm._v(_vm._s(role.name))])}),1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.closeDialogVisible()}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.subminRole()}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--将角色售给用户-->\r\n<template>\r\n  <div class=\"home\">\r\n    <el-dialog :title=\"title\" append-to-body :visible.sync=\"dialogVisible\">\r\n      <div style=\"margin: 15px 0;\"></div>\r\n      <el-checkbox-group v-model=\"userCheckList\">\r\n        <el-checkbox v-for=\"role in roleList\" :label=\"role.roleId\" :key=\"role.roleId\">{{ role.name }}</el-checkbox>\r\n      </el-checkbox-group>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"closeDialogVisible()\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"subminRole()\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getRoleList, renewRole, userRole } from '../../services/systemManage'\r\nexport default {\r\n  name: 'GiveRole',\r\n  data() {\r\n    return {\r\n      form: {},\r\n      dialogVisible: false,\r\n      activeName: 'first',\r\n      title: '选择角色',\r\n      userCheckList: [],\r\n      roleList: [],\r\n    }\r\n  },\r\n  methods: {\r\n    //返回所有的角色集合 \r\n    getAllRole() {\r\n      getRoleList().then((res) => {\r\n        console.log(res);\r\n        this.roleList = res.data.data //获取后台角色\r\n      })\r\n    },\r\n    //返回用户的角色 \r\n    getUserRole(fatherItem) {\r\n      this.userCheckList = []\r\n      userRole(fatherItem.userId).then((res) => {\r\n        let list = res.data.data\r\n        list.forEach(item => {\r\n          this.userCheckList[this.userCheckList.length++] = item.roleId\r\n        });\r\n        this.userCheckList =  Object.values( this.userCheckList)\r\n      })\r\n    },\r\n    // 显示弹窗\r\n    showGiveRoles(fatherItem) {\r\n      this.userId = fatherItem.userId\r\n      this.getAllRole()                    //获取所有的角色列表\r\n      this.getUserRole(fatherItem)       //获取用户目前拥有的角色列表\r\n      this.dialogVisible = true\r\n    },\r\n    //关闭弹窗\r\n    closeDialogVisible() {\r\n      this.dialogVisible = false\r\n    },\r\n    //提交角色\r\n    subminRole() {\r\n      let data = {}\r\n      data.userId = this.userId\r\n      data.roleList = []\r\n      this.userCheckList.forEach(item=>{\r\n        let roleData = {\r\n          roleId:item\r\n        }\r\n        data.roleList.push(roleData)\r\n      })\r\n      renewRole(data).then((res) => {\r\n        console.log(res);\r\n        if (res.data.code === 200) {\r\n          this.dialogVisible = false //关闭弹窗\r\n          this.$parent.getFollowdiaryList() //相当于刷新列表，重新获取了一遍用户信息\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-input {\r\n  width: 150px;\r\n  margin: 15px 5px 10px 20px;\r\n}\r\n\r\n.xz {\r\n  margin-left: 20px;\r\n}\r\n\r\n.el-radio-group {\r\n  margin-left: 50px;\r\n  margin-bottom: 10px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.top {\r\n  margin-top: -40px;\r\n}\r\n\r\n.xz1 {\r\n  margin-bottom: 10px;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GiveRole.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GiveRole.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GiveRole.vue?vue&type=template&id=4362e3e4&scoped=true&\"\nimport script from \"./GiveRole.vue?vue&type=script&lang=js&\"\nexport * from \"./GiveRole.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GiveRole.vue?vue&type=style&index=0&id=4362e3e4&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4362e3e4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"addRoleBox\"},[_c('el-dialog',{attrs:{\"title\":\"新增用户\",\"visible\":_vm.dialogVisible,\"width\":\"30%\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"dataForm\",staticClass:\"login_in\",attrs:{\"label-width\":\"0px\",\"model\":_vm.dataForm,\"rules\":_vm.checkForm}},[_c('div',{staticClass:\"form-info\"},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"prefix-icon\":\"el-icon-user\",\"placeholder\":\"请输入用户用户名\"},model:{value:(_vm.dataForm.username),callback:function ($$v) {_vm.$set(_vm.dataForm, \"username\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"dataForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"email\"}},[_c('el-input',{attrs:{\"prefix-icon\":\"el-icon-user\",\"placeholder\":\"请输入用户邮箱\"},model:{value:(_vm.dataForm.email),callback:function ($$v) {_vm.$set(_vm.dataForm, \"email\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"dataForm.email\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"age\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"prefix-icon\":\"el-icon-user\",\"placeholder\":\"请输入用户年龄\"},model:{value:(_vm.dataForm.age),callback:function ($$v) {_vm.$set(_vm.dataForm, \"age\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"dataForm.age\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"sex\"}},[_c('el-select',{model:{value:(_vm.dataForm.sex),callback:function ($$v) {_vm.$set(_vm.dataForm, \"sex\", $$v)},expression:\"dataForm.sex\"}},[_c('el-option',{attrs:{\"label\":\"女\",\"value\":\"女\"}}),_c('el-option',{attrs:{\"label\":\"男\",\"value\":\"男\"}}),_c('el-option',{attrs:{\"label\":\"保密\",\"value\":\"保密\"}})],1)],1)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.closeDialogVisible}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.showDialogVisible,_vm.submit()}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"addRoleBox\">\r\n      <el-dialog\r\n        title=\"新增用户\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"30%\" center>\r\n        <el-form label-width=\"0px\" class=\"login_in\"  ref=\"dataForm\" :model=\"dataForm\" :rules=\"checkForm\">\r\n          <div class=\"form-info\">\r\n            <el-form-item prop=\"username\">\r\n              <el-input\r\n                type=\"text\"\r\n                prefix-icon=\"el-icon-user\"\r\n                placeholder=\"请输入用户用户名\"\r\n                v-model.trim=\"dataForm.username\">\r\n              </el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"email\">\r\n              <el-input\r\n              prefix-icon=\"el-icon-user\"\r\n                placeholder=\"请输入用户邮箱\"\r\n                v-model.trim=\"dataForm.email\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"age\">\r\n              <el-input\r\n                type=\"text\"\r\n                prefix-icon=\"el-icon-user\"\r\n                placeholder=\"请输入用户年龄\"\r\n                v-model.trim=\"dataForm.age\">\r\n              </el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"sex\">\r\n            <el-select v-model=\"dataForm.sex\">\r\n              <el-option label=\"女\" value=\"女\"></el-option>\r\n              <el-option label=\"男\" value=\"男\"></el-option>\r\n              <el-option label=\"保密\" value=\"保密\"></el-option>\r\n            </el-select>\r\n    </el-form-item>\r\n          </div>\r\n        </el-form>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"closeDialogVisible\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"showDialogVisible,submit()\">确 定</el-button>\r\n        </span>\r\n      </el-dialog>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import rules from '@/utils/rules'\r\n  import {addUser} from '@/services/systemManage'\r\n    export default {\r\n      name:'addRolepopUp',\r\n      data() {\r\n        return {\r\n          dataForm:{\r\n            username:'',\r\n            email:'',\r\n            age:'',\r\n            sex:'保密'\r\n          },\r\n          dialogVisible: false,\r\n          checkForm:{\r\n          //用户名校验\r\n          username:[\r\n            {validator: rules.FormValidate.Form().validateUserName,trigger:'blur'}\r\n          ],\r\n          //邮箱校验\r\n          email:[\r\n            {validator: rules.FormValidate.Form().validateEmail,trigger:'blur'}\r\n          ],\r\n          //年龄校验\r\n          age:[\r\n            {validator: rules.FormValidate.Form().validateNumber,trigger:'blur'}\r\n          ],\r\n        },\r\n        };\r\n      },\r\n      methods:{\r\n        closeDialogVisible(){\r\n          this.dialogVisible = false\r\n        },\r\n        showDialogVisible(){\r\n           this.dialogVisible = !this.dialogVisible\r\n        },\r\n        submit(){\r\n          let data = {}\r\n          data.username = this.dataForm.username\r\n          data.email = this.dataForm.email\r\n          data.age = (this.dataForm.age)\r\n          data.sex = this.dataForm.sex\r\n          addUser(data).then((res)=>{\r\n            if(res.data.code === 200){\r\n                this.$message({\r\n                    message: \"添加用户成功！\",\r\n                    type: \"success\",\r\n                })\r\n                this.dialogVisible = false  //关闭弹窗\r\n                this.$parent.getFollowdiaryList() //刷新页面\r\n            }else if(res.data.code === 411){\r\n                this.$message({\r\n                    message: \"用户名重复！\",\r\n                    type: \"error\",\r\n                })\r\n            }else if(res.data.code === 406){\r\n              this.$message({\r\n                message:res.data.message,\r\n                type:\"error\"\r\n              })\r\n            }\r\n          })\r\n        }\r\n      }\r\n    };\r\n  </script>\r\n  <style>\r\n  \r\n  </style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./addUserpopUp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./addUserpopUp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addUserpopUp.vue?vue&type=template&id=68f22381&\"\nimport script from \"./addUserpopUp.vue?vue&type=script&lang=js&\"\nexport * from \"./addUserpopUp.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_vm._v(\"` \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData},on:{\"selection-change\":_vm.deleteLog}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"用户名\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"ip\",\"label\":\"ip\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"createDate\",\"label\":\"事件时间\",\"width\":\"190\"}}),_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"事件类型\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"model\",\"label\":\"事件种类\"}}),_c('el-table-column',{attrs:{\"prop\":\"result\",\"label\":\"事件结果\"}}),_c('el-table-column',{attrs:{\"prop\":\"description\",\"label\":\"事件注释\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteROW(scope.row)}}})]}}])})],1),_c('el-pagination',{staticClass:\"page\",attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.total,\"page-size\":_vm.pageSize},on:{\"current-change\":_vm.handleCurrentChange}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.deleteBtn(_vm.selections)}}},[_vm._v(\" 批量删除 \")]),_c('GiveRole',{ref:\"GiveRole\"}),_c('addUserpopUp',{ref:\"addUserpopUp\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--日志管理-->\r\n<template>\r\n  <div class=\"home\">\r\n    <!--主题-->`\r\n    <el-table\r\n      :data=\"tableData\"\r\n      style=\"width: 100%\"\r\n      @selection-change=\"deleteLog\"\r\n    >\r\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n      <el-table-column\r\n        prop=\"username\"\r\n        label=\"用户名\"\r\n        width=\"120\"\r\n      ></el-table-column>\r\n      <el-table-column prop=\"ip\" label=\"ip\" width=\"120\"></el-table-column>\r\n      <el-table-column\r\n        prop=\"createDate\"\r\n        label=\"事件时间\"\r\n        width=\"190\"\r\n      ></el-table-column>\r\n      <el-table-column\r\n        prop=\"type\"\r\n        label=\"事件类型\"\r\n        width=\"120\"\r\n      ></el-table-column>\r\n      <el-table-column prop=\"model\" label=\"事件种类\"></el-table-column>\r\n      <el-table-column prop=\"result\" label=\"事件结果\"></el-table-column>\r\n      <el-table-column prop=\"description\" label=\"事件注释\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"150\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            circle\r\n            size=\"mini\"\r\n            @click=\"deleteROW(scope.row)\"\r\n          ></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 批量删除日志 -->\r\n\r\n    <!--分页表单-->\r\n    <el-pagination\r\n      background\r\n      layout=\"prev, pager, next\"\r\n      :total=\"total\"\r\n      :page-size=\"pageSize\"\r\n      @current-change=\"handleCurrentChange\"\r\n      class=\"page\"\r\n    >\r\n    </el-pagination>\r\n    <el-button\r\n      type=\"primary\"\r\n      icon=\"el-icon-delete\"\r\n      @click=\"deleteBtn(selections)\"\r\n    >\r\n      批量删除\r\n    </el-button>\r\n    <!--提示框的组件-->\r\n    <GiveRole ref=\"GiveRole\"></GiveRole>\r\n    <addUserpopUp ref=\"addUserpopUp\"></addUserpopUp>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GiveRole from \"../../components/permissManage/GiveRole\";\r\nimport addUserpopUp from \"../../components/permissManage/addUserpopUp.vue\";\r\nimport { getLoglist, logDelete, logsDelete } from \"../../services/systemManage\";\r\nexport default {\r\n  name: \"MemberArchive\",\r\n  data() {\r\n    return {\r\n      //根据后端所川回的值\r\n      tableData: [\r\n        {\r\n          logId: \"\",\r\n          username: \"\",\r\n          ip: \"\",\r\n          createDate: \"\",\r\n          type: \"\",\r\n          model: \"\",\r\n          result: \"\",\r\n          description: \"\",\r\n          total: \"\",\r\n          pageSize: \"\",\r\n        },\r\n      ],\r\n      total: 0, //页面总条数\r\n      page: 1, //请求第一次的params\r\n      pageSize: 0,\r\n      selections: [],\r\n    };\r\n  },\r\n  components: { GiveRole, addUserpopUp },\r\n  mounted() {\r\n    this.getFollowdiaryList();\r\n  },\r\n  methods: {\r\n    //获取所有列表的信息\r\n    getFollowdiaryList() {\r\n      getLoglist(this.page).then((res) => {\r\n        this.tableData = res.data.data.list; //后端返回的值赋值给页面\r\n        this.total = res.data.data.total; //后端返回的总数量\r\n        this.pageSize = res.data.data.pageSize; //后端放回每页总条数\r\n      });\r\n    },\r\n    //分页\r\n    handleCurrentChange(page) {\r\n      this.page = page;\r\n      this.getFollowdiaryList();\r\n    },\r\n    //删除列表\r\n    deleteROW(row) {\r\n      this.$confirm(\"此操作将永久删除该文件, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          logDelete(row.logId)\r\n            .then(() => {\r\n              this.$message({\r\n                message: \"删除用户成功！\",\r\n                type: \"success\",\r\n              });\r\n              this.getFollowdiaryList(); //更新列表\r\n            })\r\n            .catch(() => {\r\n              console.log(\"错误捕获\");\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\",\r\n          });\r\n        });\r\n    },\r\n    //批量删除\r\n    deleteBtn(data) {\r\n      this.$confirm(\"此操作将永久删除该文件, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          logsDelete(data)\r\n            .then(() => {\r\n              this.$message({\r\n                message: \"删除用户成功！\",\r\n                type: \"success\",\r\n              });\r\n              this.getFollowdiaryList(); //更新列表\r\n            })\r\n            .catch(() => {\r\n              console.log(\"错误捕获\");\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"info\",\r\n            message: \"已取消删除\",\r\n          });\r\n        });\r\n    },\r\n    deleteLog(val) {\r\n      this.selections = val;\r\n      // console.log(this.selections);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.nav-select {\r\n  margin: 10px 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  .nav-right {\r\n    display: flex;\r\n    .searchData {\r\n      margin-left: 10px;\r\n    }\r\n  }\r\n}\r\n.page {\r\n  margin-top: 10px;\r\n\r\n  text-align: center;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./theLogManage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./theLogManage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./theLogManage.vue?vue&type=template&id=05137139&scoped=true&\"\nimport script from \"./theLogManage.vue?vue&type=script&lang=js&\"\nexport * from \"./theLogManage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./theLogManage.vue?vue&type=style&index=0&id=05137139&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"05137139\",\n  null\n  \n)\n\nexport default component.exports","import servers from './service'\r\n//获取角色列表 \r\nexport const getRoleList = () =>{\r\n  const url = '/admin/roles'\r\n  return servers.get(url)\r\n}\r\n//添加角色 \r\nexport const addRole = (data) =>{\r\n  const url = '/admin/roles'\r\n  return servers.post(url,data)\r\n}\r\n\r\n//查看一个角色的权限 \r\nexport const lookRole = (RoleId) =>{\r\n  const url = `/admin/roles/menu/${RoleId}`\r\n  return servers.get(url)\r\n}\r\n\r\n//获取所有权限树形结构\r\nexport const getTree = () =>{\r\n  const url = `/admin/menus/tree`\r\n  return servers.get(url)\r\n}\r\n\r\n//保存修改后的角色权限\r\nexport const saveTree = (data) =>{\r\n  const url = '/admin/roles/menu'\r\n  return servers.put(url,data,)\r\n}\r\n\r\n//删除一个角色\r\nexport const roleDelete = (roleId) =>{\r\n  const url = `/admin/roles/${roleId}`\r\n  return servers.delete(url)\r\n}\r\n//获取分页的相关数据\r\nexport const getuserListApi = (params) =>{\r\n  const url = `/admin/users/pages/${params}`\r\n  return servers.get(url)\r\n} \r\n//更新用户角色\r\nexport const renewRole = (data) =>{\r\n  const url = '/admin/users/role'\r\n  return servers.put(url,data)\r\n}\r\n//删除用户（根据id进行删除）\r\nexport const userDelete = (userId) =>{\r\n  const url = `/admin/users/${userId}`\r\n  return servers.delete(url)\r\n}\r\n\r\n//添加一个用户\r\nexport const addUser = (data) =>{\r\n  const url = `/admin/users`\r\n  return servers.post(url,data)\r\n}\r\n\r\n\r\n//获取日志列表\r\nexport const getLoglist = (params) =>{\r\n  const url = `/admin/logs/pages/${params}`\r\n  return servers.get(url)\r\n} \r\n\r\n\r\n//删除日子（根据id进行删除）\r\nexport const logDelete = (userId) =>{\r\n  const url = `/admin/logs/${userId}`\r\n  return servers.delete(url)\r\n}\r\n\r\n//批量删除\r\nexport const logsDelete = (data) =>{\r\n  const url = `/admin/logs`\r\n  return servers.post(url,data)\r\n}\r\n\r\n//查找指定用户校色（根据id进行删除）\r\nexport const userRole = (userId) =>{\r\n  const url = `/admin/users/role/${userId}`\r\n  return servers.get(url)\r\n}\r\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","dialogVisible","on","$event","staticStyle","model","value","callback","$$v","userCheckList","expression","_l","role","key","roleId","_v","_s","name","slot","closeDialogVisible","subminRole","staticRenderFns","data","form","activeName","roleList","methods","getAllRole","getRoleList","console","getUserRole","fatherItem","userRole","list","showGiveRoles","renewRole","component","ref","dataForm","checkForm","$set","trim","showDialogVisible","submit","username","email","age","sex","validator","trigger","addUser","message","type","tableData","deleteLog","scopedSlots","_u","fn","scope","deleteROW","row","total","pageSize","handleCurrentChange","deleteBtn","selections","logId","ip","createDate","result","description","page","components","GiveRole","addUserpopUp","mounted","getFollowdiaryList","getLoglist","confirmButtonText","cancelButtonText","then","logDelete","logsDelete","val","url","servers","addRole","lookRole","RoleId","getTree","saveTree","roleDelete","getuserListApi","params","userDelete","userId"],"sourceRoot":""}