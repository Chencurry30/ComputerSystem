"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[397],{397:function(t,e,i){i.r(e),i.d(e,{default:function(){return $}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("div",{staticClass:"homeHeader"},[e("div",{staticClass:"HeaderLeft"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getAuditVideoList(-1)}}},[t._v("获取审核列表")])],1),e("div",{staticClass:"HeaderRight"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getAuditVideoList(0)}}},[t._v("未审核")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getAuditVideoList(1)}}},[t._v("审核通过")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getAuditVideoList(2)}}},[t._v("审核不通过")])],1)]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[e("el-table-column",{attrs:{type:"selection",width:"55"}}),e("el-table-column",{attrs:{prop:"examineId",label:"审核ID",width:"100"}}),e("el-table-column",{attrs:{prop:"name",label:"视屏名称",width:"100"}}),e("el-table-column",{attrs:{prop:"introduction",label:"视屏介绍",width:"100"}}),e("el-table-column",{attrs:{prop:"authorNickname",label:"上传作者",width:"150"}}),e("el-table-column",{attrs:{prop:"typeName",label:"视屏种类"}}),e("el-table-column",{attrs:{prop:"passDate",label:"上传时间"}}),e("el-table-column",{attrs:{prop:"applyNickname",label:"审核人"}}),e("el-table-column",{attrs:{prop:"reviewComment",label:"审核信息"}}),e("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(i){return[0===i.row.examineStatus?e("el-button",{directives:[{name:"has",rawName:"v-has",value:"system:video:examine",expression:"`system:video:examine`"}],attrs:{type:"success",size:"mini"},on:{click:function(e){return t.auditRow(i.row)}}},[t._v("审核")]):t._e(),e("el-button",{directives:[{name:"has",rawName:"v-has",value:"system:video:viewExamine",expression:"`system:video:viewExamine`"}],attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.toViewRow(i.row)}}},[t._v("查看")])]}}])})],1),e("el-pagination",{staticClass:"pageBody",attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.handleCurrentChange}}),e("auditVideo",{ref:"auditVideo"}),e("toViewAllpopUp",{ref:"toViewAllpopUp"})],1)},s=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"auditBox"},[e("el-dialog",{attrs:{title:"提示",center:"",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"auditMain"},[e("div",{staticClass:"MainHeader"},[e("div",{staticClass:"MainLeft"},[e("div",{staticClass:"title"},[t._v("视屏图片")]),e("img",{attrs:{src:[t.getPublicUrl+t.videoImage],alt:""}})]),e("div",{staticClass:"MainRight"},[e("div",{staticClass:"title"},[t._v("视屏内容")]),e("videoPlay",{attrs:{videoLink:t.videoLink}})],1)]),e("div",{staticClass:"MainContent"},[e("div",{staticClass:"title"},[t._v("审核选项")]),e("el-radio-group",{staticClass:"ContentSelect",model:{value:t.commitData.examineResult,callback:function(e){t.$set(t.commitData,"examineResult",e)},expression:"commitData.examineResult"}},[e("el-radio",{attrs:{label:1}},[t._v("审核通过")]),e("el-radio",{attrs:{label:2}},[t._v("审核不通过")])],1)],1),e("div",{staticClass:"MainBottem"},[e("el-form",{ref:"form",attrs:{model:t.commitData,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"审核意见"}},[e("el-input",{model:{value:t.commitData.reviewComment,callback:function(e){t.$set(t.commitData,"reviewComment",e)},expression:"commitData.reviewComment"}})],1)],1)],1)]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subMitData()}}},[t._v("确 定")])],1)])],1)},l=[],n=i(4835),r=i(7564),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"videoPlay"},[e("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:t.playerOptions}})],1)},u=[],c={name:"videoPlay",props:["videoLink"],data(){return{playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:`${(0,n.Y)()}${this.videoLink}`}],notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}}}}},m=c,p=i(1001),v=(0,p.Z)(m,d,u,!1,null,"7129c017",null),g=v.exports,h={components:{videoPlay:g},name:"auditVideo",data(){return{dialogVisible:!1,videoImage:"",videoLink:"",commitData:{examineId:0,examineResult:0,reviewComment:""}}},methods:{showDialog(t){this.videoImage=t.image,this.videoLink=t.link,this.commitData.examineId=t.examineId,console.log(t),this.dialogVisible=!0},subMitData(){0===this.commitData.examineResult?this.$message.error("请给出审核的状态"):""===this.commitData.reviewComment?this.$message.error("请给出审核意见"):(0,r.E5)(this.commitData).then((t=>{200===t.data.code&&(this.$message.success("视屏审核成功"),this.dialogVisible=!0,this.$parent.getAuditVideoList(-1))}))}},computed:{getPublicUrl(){return(0,n.Y)()}}},b=h,f=(0,p.Z)(b,o,l,!1,null,"7da6b415",null),y=f.exports,C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"auditBox"},[e("el-dialog",{attrs:{title:"提示",center:"",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",{staticClass:"auditMain"},[e("div",{staticClass:"MainHeader"},[e("div",{staticClass:"MainLeft"},[e("div",{staticClass:"title"},[t._v("视屏图片")]),e("img",{attrs:{src:[t.getPublicUrl+t.videoImage],alt:""}})]),e("div",{staticClass:"MainRight"},[e("div",{staticClass:"title"},[t._v("视屏内容")]),e("videoPlay",{attrs:{videoLink:t.videoLink}})],1)])]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.subMitData()}}},[t._v("确 定")])],1)])],1)},w=[],k={components:{videoPlay:g},name:"auditVideo",data(){return{dialogVisible:!1,videoImage:"",videoLink:""}},methods:{showDialog(t){this.videoImage=t.image,this.videoLink=t.link,console.log(t),this.dialogVisible=!0}},computed:{getPublicUrl(){return(0,n.Y)()}}},V=k,x=(0,p.Z)(V,C,w,!1,null,"7dd09145",null),D=x.exports,_={name:"examineManage",data(){return{tableData:[],total:0,page:1,pageSize:0,listType:0,statusType:0}},components:{auditVideo:y,toViewAllpopUp:D},mounted(){this.getAuditVideoList(-1)},methods:{getAuditVideoList(t){this.listType=1;let e=this.page;this.statusType=t,(0,r.Bi)({status:t,page:e}).then((t=>{200===t.data.code?(this.page=1,this.tableData=t.data.data.list,this.total=t.data.data.total,this.pageSize=t.data.data.pageSize):417===t.data.code&&(this.page=1,this.tableData=[],this.total=0,this.pageSize=12)}))},handleCurrentChange(t){this.page=t,this.getAuditVideoList(this.statusType)},auditRow(t){this.$refs.auditVideo.showDialog(t)},toViewRow(t){this.$refs.toViewAllpopUp.showDialog(t)}}},L=_,M=(0,p.Z)(L,a,s,!1,null,"74ba662c",null),$=M.exports},7564:function(t,e,i){i.d(e,{$J:function(){return n},Bi:function(){return o},E5:function(){return l},O3:function(){return s}});var a=i(4498);const s=t=>{const e=`admin/videos/pages/0-${t}`;return a.Z.get(e)},o=({status:t,page:e})=>{const i=`admin/videos/examine/${t}-${e}`;return a.Z.get(i)},l=t=>{const e="/admin/videos/examine";return a.Z.put(e,t)},n=t=>{const e=`admin/videos/${t}`;return a.Z["delete"](e)}},4835:function(t,e,i){i.d(e,{Y:function(){return a}});const a=()=>"https://system-1234.oss-cn-chengdu.aliyuncs.com/"}}]);
//# sourceMappingURL=397.4db7b09a.js.map