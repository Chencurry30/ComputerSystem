(self["webpackChunkweb_7"]=self["webpackChunkweb_7"]||[]).push([[870],{9870:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"register-wrap-bg"},[t("div",{staticClass:"register_box"},[t("el-form",{ref:"dataForm",staticClass:"register_in",attrs:{"label-width":"0px",model:e.dataForm,rules:e.checkForm}},[t("div",{staticClass:"form-info"},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{type:"text","prefix-icon":"el-icon-user",placeholder:"请输入账号"},model:{value:e.dataForm.username,callback:function(t){e.$set(e.dataForm,"username","string"===typeof t?t.trim():t)},expression:"dataForm.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:!0===e.changeHiddenImg?"text":"password","prefix-icon":"el-icon-thumb",placeholder:"请输入密码"},on:{focus:e.showImg},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password","string"===typeof t?t.trim():t)},expression:"dataForm.password"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showHiddenImg,expression:"showHiddenImg"}],staticClass:"clickImg",on:{click:e.changeImg}},[t("div",{class:!0===e.changeHiddenImg?"showImg":"hiddenImg"})])],1),t("el-form-item",{attrs:{prop:"phone"}},[t("el-input",{attrs:{"label-width":"100px",type:"text","prefix-icon":"el-icon-user",placeholder:"请输入手机号"},model:{value:e.dataForm.phone,callback:function(t){e.$set(e.dataForm,"phone","string"===typeof t?t.trim():t)},expression:"dataForm.phone"}})],1),t("el-form-item",{staticClass:"verification",attrs:{prop:"smsCode"}},[t("el-input",{attrs:{type:"text","prefix-icon":"el-icon-thumb",placeholder:"请输入验证码"},model:{value:e.dataForm.smsCode,callback:function(t){e.$set(e.dataForm,"smsCode","string"===typeof t?t.trim():t)},expression:"dataForm.smsCode"}}),t("SendCodeBtn",{attrs:{phone:this.dataForm.phone}})],1)],1),t("el-form-item",{staticClass:"btns"},[t("el-button",{attrs:{type:"primary",disabled:!e.canRegister},on:{click:e.goToRegister}},[e._v("注    册 ")])],1),t("div",{staticClass:"stytem"},[t("div",{staticClass:"stytem-left font-text"},[t("router-link",{attrs:{to:{name:"Home"}}},[e._v("返回首页")])],1),t("div",{staticClass:"stytem-right font-text"},[t("router-link",{attrs:{to:{name:"loginView"}}},[e._v("用户登录")])],1)])],1)],1)])},o=[],a=r(606),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"getVerificationCode",on:{click:e.getVerCode}},[e._v(" "+e._s(e.verificationCodeInfo)+" ")])},i=[],d={props:["phone"],name:"sendCodeBtn",data(){return{sendTimeCode:5,bVerification:!1,verificationCodeInfo:"发送验证码"}},methods:{getVerCode(){if(""===this.phone)return;if(!0===this.bVerification)return;this.bVerification=!0;let e=setInterval((()=>{this.sendTimeCode-=1,this.verificationCodeInfo=`剩余${this.sendTimeCode}秒后发送`,this.sendTimeCode<=0&&(this.verificationCodeInfo="发送验证码",this.sendTimeCode=5,clearInterval(e),this.bVerification=!1)}),1e3),t={phone:this.phone};console.log(t),(0,a.TG)(t).then((e=>{console.log(e.data.code),414===e.data.code?this.$message.error("手机号为空，请输入手机号"):413===e.data.code?this.$message.error("手机号已注册，请输入新的手机号"):200===e.data.code&&this.$message({message:"验证码已发送，请注意查收",type:"success"})}))}}},m=d,c=r(1001),l=(0,c.Z)(m,n,i,!1,null,"5a80306e",null),u=l.exports,h=r(2325),p=r(3822),g=r(6310),f={name:"registerView",data(){return{showHiddenImg:!1,changeHiddenImg:!1,dataForm:{username:"",password:"",phone:"",smsCode:""},checkForm:{username:[{validator:g.y.Form().validateUserName,trigger:"blur"}],password:[{validator:g.y.Form().validatePassWord,trigger:"blur"}],phone:[{validator:g.y.Form().validatePhone,trigger:"blur"}]}}},components:{SendCodeBtn:u},computed:{canRegister(){const{username:e,password:t}=this.dataForm;return Boolean(e&&t)},...(0,p.Se)("encryption",{getkeyInfo:"getkeyInfo"})},methods:{submitLogin(){this.automaticLogin=!this.automaticLogin},goToRegister(){let e={};e.username=this.dataForm.username,e.password=(0,h.ry)(this.getkeyInfo.encryPtion,this.dataForm.password),e.phone=this.dataForm.phone,e.smsCode=this.dataForm.smsCode,e.uuId=this.getkeyInfo.uuId,(0,a.N$)(e).then((e=>{200===e.data.code?(this.$message({message:"恭喜你，注册成功！请登录",type:"success"}),this.$router.push({name:"loginView"})):201===e.data.code&&(this.$message.error("用户名重复，请重新输入！"),this.dataForm={username:"",password:"",phone:"",smsCode:""})}))},showImg(){this.showHiddenImg=!0},changeImg(){console.log(this.changeHiddenImg),this.changeHiddenImg=!this.changeHiddenImg}},mounted(){this.$store.dispatch("encryption/getPubKey")}},w=f,v=(0,c.Z)(w,s,o,!1,null,"0be1ff38",null),C=v.exports},606:function(e,t,r){"use strict";r.d(t,{N$:function(){return a},TG:function(){return n},n$:function(){return o}});var s=r(5318);const o=e=>{const t="/users/login";return s.Z.post(t,e)},a=e=>{const t="/users/register";return s.Z.post(t,e)},n=e=>{const t="/users/sms";return s.Z.post(t,e)}},6310:function(e,t){let r=/^(?![0-9]*$)(?![a-zA-Z]*$)[a-zA-Z0-9]{2,20}$/,s=/^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/,o=/^(?![0-9]*$)(?![a-zA-Z]*$)[a-zA-Z0-9]{6,12}$/,a=/^(?![0-9]*$){4,4}/,n=/^\d+$|^\d+[.]?\d+$/,i=/^[\u0391-\uFFE5A-Za-z]+$/,d=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,m=/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/,c=function(){function e(){}return e.Form=function(){return{validateUserName(e,t,s){if(""===t)return s(new Error("请输入账号"));r.test(t)?s():s(new Error("账号必须为2-12位(必须包含数字与字母)"))},validatePhone(e,t,r){if(""===t)return r(new Error("请输入手机号码"));s.test(t)?r():r(new Error("手机格式不正确"))},validatePassWord(e,t,r){if(""===t)return r(new Error("请输入密码"));o.test(t)?r():r(new Error("密码为6-12位(必须包含数字和字母)"))},validateCode(e,t,r){return""===t?r(new Error("验证码不能为空")):a.test(t)?void r():r(new Error("验证码位数不对"))},validateNumber(e,t,r){""!==t?n.test(t)?r():r(new Error("年龄只能是纯数字")):r()},validatePsdReg(e,t,r){if(!t)return r(new Error("请输入密码"));o.test(t)?r():r(new Error("请输入6-20位英文字母、数字或者符号（除空格），且字母、数字和标点符号至少包含两种"))},validateContacts(e,t,r){if(!t)return r(new Error("请输入联系人"));i.test(t)?r():r(new Error("联系人不可输入特殊字符"))},validateEmail(e,t,r){""!==t?m.test(t)?r():r(new Error("邮箱格式不正确")):r()},ID(e,t,r){if(!t)return r(new Error("身份证不能为空"));d.test(t)?r():r(new Error("请输入正确的二代身份证号码"))}}},e}();t.y=c}}]);
//# sourceMappingURL=870.997da8da.js.map