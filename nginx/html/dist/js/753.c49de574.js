(self["webpackChunkweb_7"]=self["webpackChunkweb_7"]||[]).push([[753],{6753:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-wrap-bg"},[t("div",{staticClass:"login_box"},[t("el-form",{ref:"dataForm",staticClass:"login_in",attrs:{"label-width":"0px",model:e.dataForm,rules:e.checkForm}},[t("div",{staticClass:"form-info"},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{type:"text","prefix-icon":"el-icon-user",placeholder:"请输入账号"},model:{value:e.dataForm.username,callback:function(t){e.$set(e.dataForm,"username","string"===typeof t?t.trim():t)},expression:"dataForm.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:!0===e.changeHiddenImg?"text":"password","prefix-icon":"el-icon-thumb",placeholder:"请输入密码"},on:{focus:e.showImg},model:{value:e.dataForm.password,callback:function(t){e.$set(e.dataForm,"password","string"===typeof t?t.trim():t)},expression:"dataForm.password"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showHiddenImg,expression:"showHiddenImg"}],staticClass:"clickImg",on:{click:e.changeImg}},[t("div",{class:!0===e.changeHiddenImg?"showImg":"hiddenImg"})])],1)],1),t("div",{staticClass:"tablenav"},[t("div",{staticClass:"navleft"},[t("div",{staticClass:"leftbtn"},[t("div",{class:!1===e.automaticLogin?"dashDiv":"dashDivSelectd"},[t("span",{staticClass:"dashSpan",on:{click:e.submitLogin}})]),t("div",{staticClass:"prompt"},[e._v("自动登录")])])]),t("div",{staticClass:"navright"},[t("div",{staticClass:"prompt",on:{click:e.gotoretrieve}},[e._v("忘记密码")])])]),t("el-form-item",{staticClass:"btns"},[t("el-button",{attrs:{type:"primary",disabled:!e.canSubmit},on:{click:function(t){return e.goToLogin("dataForm")}}},[e._v("登    录 ")])],1),t("div",{staticClass:"stytem"},[t("div",{staticClass:"stytem-left font-text"},[t("router-link",{attrs:{to:{name:"Home"}}},[e._v("返回首页")])],1),t("div",{staticClass:"stytem-right font-text"},[t("router-link",{attrs:{to:{name:"registerView"}}},[e._v("用户注册")])],1)])],1)],1)])},a=[];
/*! js-cookie v3.0.1 | MIT */
function o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var s={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function i(e,t){function r(r,n,a){if("undefined"!==typeof document){a=o({},t,a),"number"===typeof a.expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var i in a)a[i]&&(s+="; "+i,!0!==a[i]&&(s+="="+a[i].split(";")[0]));return document.cookie=r+"="+e.write(n,r)+s}}function n(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var r=document.cookie?document.cookie.split("; "):[],n={},a=0;a<r.length;a++){var o=r[a].split("="),s=o.slice(1).join("=");try{var i=decodeURIComponent(o[0]);if(n[i]=e.read(s,i),t===i)break}catch(d){}}return t?n[t]:n}}return Object.create({set:r,get:n,remove:function(e,t){r(e,"",o({},t,{expires:-1}))},withAttributes:function(e){return i(this.converter,o({},this.attributes,e))},withConverter:function(e){return i(o({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}i(s,{path:"/"});var d=r(606),c=(r(2325),r(3822)),u=r(6310),l={name:"loginView",inject:["reload"],data(){return{automaticLogin:!1,showHiddenImg:!1,changeHiddenImg:!1,dataForm:{username:"",password:""},checkForm:{username:[{validator:u.y.Form().validateUserName,trigger:"blur"}],password:[{validator:u.y.Form().validatePassWord,trigger:"blur"}]}}},mounted(){this.reload()},methods:{getPublicKey(){this.$store.dispatch("encryption/getPubKey")},submitLogin(){this.automaticLogin=!this.automaticLogin},backHome(){let e={name:"mainHome"};this.$router.push(e)},gotoretrieve(){let e={name:"mainHome"};this.$router.push(e)},showImg(){this.showHiddenImg=!0},changeImg(){this.changeHiddenImg=!this.changeHiddenImg},goToLogin(e){this.getPublicKey(),setTimeout((()=>{this.$refs[e].validate((e=>{let t={};t.uuId=this.getkeyInfo.uuId,t.username=this.dataForm.username,t.password=this.dataForm.password,(0,d.n$)(t).then((e=>{if(console.log(e),200===e.data.code){const t=e.data.data.token;sessionStorage.setItem("token",t),this.$message({message:"恭喜你，登录成功！欢迎用户: "+name,type:"success"}),this.$router.push({name:"Home"}),this.reload()}else 400===e.data.code&&this.$message.error("用户名或密码错误，请重新输入！")}))}))}),1e3)}},computed:{canSubmit(){const{username:e,password:t}=this.dataForm;return Boolean(e&&t)},...(0,c.Se)("encryption",{getkeyInfo:"getkeyInfo"})}},m=l,p=r(1001),g=(0,p.Z)(m,n,a,!1,null,"8633a184",null),f=g.exports},606:function(e,t,r){"use strict";r.d(t,{N$:function(){return o},TG:function(){return s},n$:function(){return a}});var n=r(5318);const a=e=>{const t="/users/login";return n.Z.post(t,e)},o=e=>{const t="/users/register";return n.Z.post(t,e)},s=e=>{const t="/users/sms";return n.Z.post(t,e)}},6310:function(e,t){let r=/^(?![0-9]*$)(?![a-zA-Z]*$)[a-zA-Z0-9]{2,20}$/,n=/^1([358][0-9]|4[579]|66|7[0135678]|9[89])[0-9]{8}$/,a=/^(?![0-9]*$)(?![a-zA-Z]*$)[a-zA-Z0-9]{6,12}$/,o=/^(?![0-9]*$){4,4}/,s=/^\d+$|^\d+[.]?\d+$/,i=/^[\u0391-\uFFE5A-Za-z]+$/,d=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/,c=/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/,u=function(){function e(){}return e.Form=function(){return{validateUserName(e,t,n){if(""===t)return n(new Error("请输入账号"));r.test(t)?n():n(new Error("账号必须为2-12位(必须包含数字与字母)"))},validatePhone(e,t,r){if(""===t)return r(new Error("请输入手机号码"));n.test(t)?r():r(new Error("手机格式不正确"))},validatePassWord(e,t,r){if(""===t)return r(new Error("请输入密码"));a.test(t)?r():r(new Error("密码为6-12位(必须包含数字和字母)"))},validateCode(e,t,r){return""===t?r(new Error("验证码不能为空")):o.test(t)?void r():r(new Error("验证码位数不对"))},validateNumber(e,t,r){""!==t?s.test(t)?r():r(new Error("年龄只能是纯数字")):r()},validatePsdReg(e,t,r){if(!t)return r(new Error("请输入密码"));a.test(t)?r():r(new Error("请输入6-20位英文字母、数字或者符号（除空格），且字母、数字和标点符号至少包含两种"))},validateContacts(e,t,r){if(!t)return r(new Error("请输入联系人"));i.test(t)?r():r(new Error("联系人不可输入特殊字符"))},validateEmail(e,t,r){""!==t?c.test(t)?r():r(new Error("邮箱格式不正确")):r()},ID(e,t,r){if(!t)return r(new Error("身份证不能为空"));d.test(t)?r():r(new Error("请输入正确的二代身份证号码"))}}},e}();t.y=u}}]);
//# sourceMappingURL=753.c49de574.js.map