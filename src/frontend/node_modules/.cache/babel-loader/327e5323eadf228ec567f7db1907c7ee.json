{"ast":null,"code":"import { userLogin } from \"@/Servers/ServersApi\";\nexport default {\n  name: \"loginView\",\n\n  data() {\n    return {\n      automaticLogin: false,\n      //自动登录\n      sendTimeCode: 5,\n      //再次发送的时间\n      bVerification: false,\n      //节流阀，控制点击获取验证码\n      verificationCodeInfo: \"发送验证码\",\n      selectWay: false,\n      //注册的方式  false 表示账号密码注册  TRUE 表示手机注册\n      dataForm: {\n        username: '',\n        //账号\n        password: '',\n        //密码\n        phone: '',\n        //手机号\n        verificateCode: '' //验证码  \n\n      }\n    };\n  },\n\n  computed: {\n    //判断提交\n    canSubmit() {\n      const {\n        username,\n        password\n      } = this.dataForm;\n      return Boolean(username && password);\n    }\n\n  },\n  methods: {\n    //是否自动登录\n    submitLogin() {\n      this.automaticLogin = !this.automaticLogin;\n    },\n\n    //返回首页\n    backHome() {\n      let location = {\n        name: \"Home\"\n      };\n      this.$router.push(location);\n    },\n\n    //选择登录的方式\n    selectRegisterWay() {\n      this.selectWay = !this.selectWay;\n    },\n\n    //发送验证码的按钮\n    getVerCode() {\n      if (this.bVerification === true) {\n        return;\n      }\n\n      this.bVerification = true; //关闭节流阀\n\n      let time = setInterval(() => {\n        this.sendTimeCode -= 1;\n        this.verificationCodeInfo = `剩余${this.sendTimeCode}秒后发送`;\n\n        if (this.sendTimeCode <= 0) {\n          this.verificationCodeInfo = '发送验证码';\n          this.sendTimeCode = 5; //对应的间隔时间\n\n          clearInterval(time);\n          this.bVerification = false; //打开节流阀\n        }\n      }, 1000);\n    },\n\n    //登录 \n    goToLogin() {\n      let data = this.dataForm; // console.log(data);\n\n      userLogin(data).then(res => {\n        console.log(res.data);\n        const name = data.username;\n        const token = res.data.data.token;\n        localStorage.setItem('token', token); //保存token到本地浏览器\n\n        if (res.data.code === 200) {\n          this.$message({\n            message: \"恭喜你，登录成功！欢迎用户: \" + name,\n            type: \"success\"\n          });\n          this.$router.push({\n            name: 'Home'\n          });\n        }\n\n        if (res.data.message === '用户名不存在') {\n          this.$message({\n            message: \"该用户名不存在，请注册你的账号！\",\n            type: \"warning\"\n          });\n        }\n\n        if (res.data.message === '密码错误') {\n          this.$message({\n            message: \"密码错误，请重新输入密码\",\n            type: \"error\"\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAsHA;AACA;EACAA,iBADA;;EAEAC;IACA;MACAC,qBADA;MACA;MACAC,eAFA;MAEA;MACAC,oBAHA;MAGA;MACAC,6BAJA;MAKAC,gBALA;MAKA;MACAC;QACAC,YADA;QACA;QACAC,YAFA;QAEA;QACAC,SAHA;QAGA;QACAC,kBAJA,CAIA;;MAJA;IANA;EAaA,CAhBA;;EAiBAC;IACA;IACAC;MACA;QAAAL;QAAAC;MAAA;MACA;IACA;;EALA,CAjBA;EAwBAK;IACA;IACAC;MACA;IACA,CAJA;;IAKA;IACAC;MACA;QAAAhB;MAAA;MACA;IACA,CATA;;IAUA;IACAiB;MACA;IACA,CAbA;;IAcA;IACAC;MACA;QACA;MACA;;MACA,0BAJA,CAIA;;MACA;QACA;QACA;;QACA;UACA;UACA,sBAFA,CAEA;;UACAC;UACA,2BAJA,CAIA;QACA;MACA,CATA,EASA,IATA;IAUA,CA9BA;;IA+BA;IACAC;MACA,yBADA,CAEA;;MACAC;QACAC;QACA;QACA;QACAC,qCAJA,CAIA;;QACA;UACA;YACAC,iCADA;YAEAC;UAFA;UAIA;YAAAzB;UAAA;QACA;;QACA;UACA;YACAwB,2BADA;YAEAC;UAFA;QAIA;;QACA;UACA;YACAD,uBADA;YAEAC;UAFA;QAIA;MACA,CAxBA;IA2BA;;EA9DA;AAxBA","names":["name","data","automaticLogin","sendTimeCode","bVerification","verificationCodeInfo","selectWay","dataForm","username","password","phone","verificateCode","computed","canSubmit","methods","submitLogin","backHome","selectRegisterWay","getVerCode","clearInterval","goToLogin","userLogin","console","localStorage","message","type"],"sourceRoot":"src/views","sources":["loginView.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <vue-particles\r\n      color=\"#e8f659\"\r\n      :particleOpacity=\"0.7\"\r\n      :particlesNumber=\"60\"\r\n      shapeType=\"circle\"\r\n      :particleSize=\"6\"\r\n      linesColor=\"#e8f659\"\r\n      :linesWidth=\"1\"\r\n      :lineLinked=\"true\"\r\n      :lineOpacity=\"0.4\"\r\n      :linesDistance=\"150\"\r\n      :moveSpeed=\"3\"\r\n      :hoverEffect=\"true\"\r\n      hoverMode=\"grab\"\r\n      :clickEffect=\"true\"\r\n      clickMode=\"push\"\r\n    >\r\n    </vue-particles>\r\n    <div class=\"register_container\">\r\n      <div class=\"register_box\">\r\n\r\n        <div class=\"avatar_box\">\r\n          <img src=\"../assets/Img/LoginImg/tx.jpg\" alt=\"\" />\r\n        </div>\r\n\r\n        <el-form label-width=\"0px\" class=\"login_in\" @keyup.enter.native=\"goToLogin\">\r\n\r\n          <div class=\"navSelect\">\r\n            <div class=\"select-left\">\r\n              <div class=\"left-btn\" @click=\"selectRegisterWay\">账号登录</div>\r\n              <div class=\"btn-selected\" v-show=\"!selectWay\"></div>\r\n            </div>\r\n            <div class=\"select-right\">\r\n              <div class=\"right-btn\" @click=\"selectRegisterWay\">手机登录</div>\r\n              <div class=\"btn-selected\" v-show=\"selectWay\"></div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"form-info\" v-show=\"!selectWay\" ref=\"dataForm\">\r\n            <el-form-item prop=\"username\">\r\n              <el-input\r\n                type=\"text\"\r\n                prefix-icon=\"el-icon-user\"\r\n                placeholder=\"请输入账号\"\r\n                v-model=\"dataForm.username\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"password\">\r\n              <el-input\r\n                type=\"password\"\r\n                prefix-icon=\"el-icon-thumb\"\r\n                placeholder=\"请输入密码\"\r\n                v-model=\"dataForm.password\"\r\n              ></el-input>\r\n            </el-form-item>\r\n          </div>\r\n          <div class=\"form-info\" v-show=\"selectWay\" ref=\"dataForm\">\r\n            <el-form-item prop=\"account\">\r\n              <el-input\r\n                type=\"text\"\r\n                prefix-icon=\"el-icon-user\"\r\n                placeholder=\"请输入手机号\"\r\n                v-model=\"dataForm.phone\"\r\n              ></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"verificationCode\" class=\"verification\">\r\n              <el-input\r\n                type=\"password\"\r\n                prefix-icon=\"el-icon-thumb\"\r\n                placeholder=\"请输入验证码\"\r\n                v-model=\"dataForm.verificateCode\"\r\n              ></el-input>\r\n              <div class=\"getVerificationCode\" @click=\"getVerCode\">\r\n                {{ verificationCodeInfo }}\r\n              </div>\r\n            </el-form-item>\r\n          </div>\r\n\r\n          <div class=\"tablenav\">\r\n            <div class=\"navleft\">\r\n              <div class=\"leftbtn\">\r\n                <div :class=\"automaticLogin === false ? 'dashDiv' : 'dashDivSelectd'\">\r\n                  <span class=\"dashSpan\" @click=\"submitLogin\"></span>\r\n                </div>\r\n                <div class=\"prompt\">自动登录</div>\r\n              </div>\r\n            </div>\r\n            <div class=\"navright\">\r\n              <div class=\"prompt\">忘记密码</div>\r\n            </div>\r\n          </div>\r\n\r\n          <el-form-item class=\"btns\">\r\n            <el-button type=\"primary\" @click=\"goToLogin\" :disabled=\"!canSubmit\">登&nbsp;&nbsp;&nbsp;&nbsp;录</el-button>\r\n            <!-- <el-button type=\"primary\">注册</el-button> -->\r\n          </el-form-item>\r\n\r\n          <div class=\"stytem\">\r\n            <div class=\"stytem-left\">\r\n              <div class=\"lefttitle\" @click=\"backHome()\">返回首页</div>\r\n            </div>\r\n            <div class=\"stytem-right\">\r\n              <div class=\"righttitle\">\r\n                <router-link :to=\"{ name: 'registerView' }\">用户注册</router-link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  \r\nimport { userLogin } from \"@/Servers/ServersApi\";\r\nexport default {\r\n  name: \"loginView\",\r\n  data() {\r\n    return {\r\n      automaticLogin: false, //自动登录\r\n      sendTimeCode:5,      //再次发送的时间\r\n      bVerification:false,   //节流阀，控制点击获取验证码\r\n      verificationCodeInfo:\"发送验证码\",\r\n      selectWay: false, //注册的方式  false 表示账号密码注册  TRUE 表示手机注册\r\n      dataForm:{  \r\n        username: '', //账号\r\n        password: '', //密码\r\n        phone:'',         //手机号\r\n        verificateCode:'',  //验证码  \r\n      },\r\n    };\r\n  },\r\n  computed:{\r\n    //判断提交\r\n    canSubmit(){\r\n      const { username,password } = this.dataForm\r\n      return Boolean(username&&password)\r\n    }\r\n  },\r\n  methods: {\r\n    //是否自动登录\r\n    submitLogin() {\r\n      this.automaticLogin = !this.automaticLogin;\r\n    },\r\n    //返回首页\r\n    backHome() {\r\n      let location = { name: \"Home\" };\r\n      this.$router.push(location);\r\n    },\r\n    //选择登录的方式\r\n    selectRegisterWay() {\r\n      this.selectWay = !this.selectWay;\r\n    },\r\n    //发送验证码的按钮\r\n    getVerCode(){\r\n      if(this.bVerification === true){\r\n        return;\r\n      }\r\n      this.bVerification = true;       //关闭节流阀\r\n      let time = setInterval(()=>{\r\n        this.sendTimeCode -= 1\r\n        this.verificationCodeInfo = `剩余${this.sendTimeCode}秒后发送`\r\n        if(this.sendTimeCode <=0){\r\n          this.verificationCodeInfo = '发送验证码'\r\n          this.sendTimeCode = 5   //对应的间隔时间\r\n          clearInterval(time)\r\n           this.bVerification = false  //打开节流阀\r\n        }\r\n      },1000)\r\n    },\r\n    //登录 \r\n    goToLogin() {\r\n      let data = this.dataForm\r\n      // console.log(data);\r\n      userLogin(data).then( res => {\r\n          console.log(res.data);\r\n          const name = data.username\r\n          const token = res.data.data.token\r\n          localStorage.setItem('token',token)  //保存token到本地浏览器\r\n          if(res.data.code===200){\r\n            this.$message({\r\n              message: \"恭喜你，登录成功！欢迎用户: \" + name,\r\n              type: \"success\",\r\n            })\r\n            this.$router.push({name:'Home'})\r\n          }\r\n          if(res.data.message==='用户名不存在'){\r\n            this.$message({\r\n              message: \"该用户名不存在，请注册你的账号！\",\r\n              type: \"warning\",\r\n            })\r\n          }\r\n          if(res.data.message==='密码错误'){\r\n            this.$message({\r\n              message: \"密码错误，请重新输入密码\",\r\n              type: \"error\",\r\n            })\r\n          }\r\n        })\r\n          \r\n\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  #particles-js {\r\n    width: 100%;\r\n    height: calc(100%);\r\n    position: absolute;\r\n    background-image: url(\"../assets/Img/LoginImg/background.png\");\r\n    background-repeat: no-repeat;\r\n    background-size: cover;\r\n  }\r\n  .register_container {\r\n    z-index: 55;\r\n    background-color: #42b983;\r\n    height: 100%;\r\n  }\r\n  .el-form-item {\r\n    margin-bottom: 14px;\r\n    margin-top: 10px;\r\n  }\r\n  .register_box {\r\n    width: 450px;\r\n    height: 300px;\r\n    border-radius: 3px;\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n    .avatar_box {\r\n      height: 130px;\r\n      width: 130px;\r\n      border: 1px solid #eee;\r\n      border-radius: 50%;\r\n      box-shadow: 0 0 10px #ddd;\r\n      position: absolute;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      background-color: #fff;\r\n      padding: 10px;\r\n      img {\r\n        width: 100%;\r\n        height: 100%;\r\n        border-radius: 50%;\r\n        background-color: #eee;\r\n      }\r\n    }\r\n  }\r\n  .btns {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  }\r\n  .login_in {\r\n    z-index: 999;\r\n    position: absolute;\r\n    bottom: 0;\r\n    width: 100%;\r\n    padding: 0 20px;\r\n    box-sizing: border-box;\r\n    //选择方式\r\n    .navSelect {    \r\n      display: flex;\r\n      justify-content: space-between;\r\n      color: #ffffff;\r\n      font-size: 18px;\r\n      font-family: \"楷体\";\r\n      .select-left {\r\n        position: relative;\r\n        margin-left: 50px;\r\n        cursor: pointer;\r\n        .btn-selected {\r\n          position: absolute;\r\n          width: 60px;\r\n          height: 2px;\r\n          bottom: -1px;\r\n          left: 9px;\r\n          background-color: #ffffff;\r\n        }\r\n      }\r\n      .select-right {\r\n        position: relative;\r\n        margin-right: 50px;\r\n        cursor: pointer;\r\n        .btn-selected {\r\n          position: absolute;\r\n          width: 60px;\r\n          height: 2px;\r\n          bottom: -1px;\r\n          right: 9px;\r\n          background-color: #ffffff;\r\n        }\r\n      }\r\n    }\r\n    .verification {\r\n      //验证码登录的输入框\r\n      .el-input {\r\n        width: 240px;\r\n      }\r\n      .getVerificationCode {\r\n        position: absolute;\r\n        width: 100px;\r\n        height: 40px;\r\n        top: 0px;\r\n        right: 20px;\r\n        border-radius: 4px;\r\n        text-align: center;\r\n        cursor: pointer;\r\n        color: #ffffff;\r\n        background-color: #409eff;\r\n      }\r\n    }\r\n    .tablenav {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      font-family: \"楷体\";\r\n      .navleft {\r\n        margin-left: 30px;\r\n        .leftbtn {\r\n          display: flex;\r\n          //未选中状态\r\n          .dashDiv {\r\n            border-radius: 1.8667rem;\r\n            border: 0.03rem solid #cbcbcb;\r\n            background-color: #dad6d6;\r\n            width: 42px;\r\n            height: 16px;\r\n            margin-top: 0.26rem;\r\n            margin-right: 0.4rem;\r\n            box-sizing: border-box;\r\n          }\r\n          .dashDiv .dashSpan {\r\n            border-radius: 7px;\r\n            border: 0.03rem solid #cbcbcb;\r\n            background-color: #ffffff;\r\n            float: left;\r\n            margin-left: 0.04rem;\r\n            margin-top: 0.019rem;\r\n            width: 24px;\r\n            height: 14px;\r\n            box-sizing: border-box;\r\n          }\r\n          /*选中状态*/\r\n          .dashDivSelectd {\r\n            background-color: #4cd964;\r\n            transition: 0.5s;\r\n            border-radius: 1.8667rem;\r\n            border: 0.03rem solid #ffffff;\r\n            width: 42px;\r\n            height: 16px;\r\n            margin-top: 0.26rem;\r\n            margin-right: 0.4rem;\r\n            box-sizing: border-box;\r\n          }\r\n          .dashDivSelectd .dashSpan {\r\n            border-radius: 7px;\r\n            border: 0.03rem solid #ffffff;\r\n            background-color: #ffffff;\r\n            float: right;\r\n            margin-right: 0.04rem;\r\n            margin-top: 0.019rem;\r\n            width: 24px;\r\n            height: 14px;\r\n            box-sizing: border-box;\r\n          }\r\n        }\r\n      }\r\n      .navright {\r\n        margin-right: 30px;\r\n      }\r\n      .prompt {\r\n        margin-top: 1px;\r\n        color: #ffffff;\r\n        font-size: 18px;\r\n        font-family: 楷体;\r\n      }\r\n    }\r\n    //选择链接 \r\n    .stytem {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      align-content: center;\r\n      .stytem-left {\r\n        .lefttitle {\r\n          margin-left: 35px;\r\n          font-size: 14px;\r\n          color: #ffffff;\r\n        }\r\n      }\r\n      .stytem-right {\r\n        .righttitle {\r\n          margin-right: 35px;\r\n          font-size: 14px;\r\n          color: #ffffff;\r\n        }\r\n      }\r\n      .righttitle:hover {\r\n        color: rgb(236, 60, 11);\r\n        cursor: pointer;\r\n      }\r\n      .lefttitle:hover {\r\n        color: rgb(236, 60, 11);\r\n        cursor: pointer;\r\n      }\r\n    }\r\n    .prompt:hover {\r\n      color: rgb(236, 60, 11);\r\n      cursor: pointer;\r\n    }\r\n    //修改了button的形式 \r\n    .el-button{\r\n      padding: 12px 110px;\r\n    }\r\n    //修改输入框大小 \r\n    .el-input {\r\n      left: 7%;\r\n      width: 360px;\r\n    }\r\n  }\r\n</style>"]},"metadata":{},"sourceType":"module"}