{"ast":null,"code":"// ASN.1 JavaScript decoder\n// Copyright (c) 2008-2014 Lapo Luchini <lapo@lapo.it>\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\n\n/*global oids */\nimport { Int10 } from \"./int10\";\nvar ellipsis = \"\\u2026\";\nvar reTimeS = /^(\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\nvar reTimeL = /^(\\d\\d\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\n\nfunction stringCut(str, len) {\n  if (str.length > len) {\n    str = str.substring(0, len) + ellipsis;\n  }\n\n  return str;\n}\n\nvar Stream =\n/** @class */\nfunction () {\n  function Stream(enc, pos) {\n    this.hexDigits = \"0123456789ABCDEF\";\n\n    if (enc instanceof Stream) {\n      this.enc = enc.enc;\n      this.pos = enc.pos;\n    } else {\n      // enc should be an array or a binary string\n      this.enc = enc;\n      this.pos = pos;\n    }\n  }\n\n  Stream.prototype.get = function (pos) {\n    if (pos === undefined) {\n      pos = this.pos++;\n    }\n\n    if (pos >= this.enc.length) {\n      throw new Error(\"Requesting byte offset \" + pos + \" on a stream of length \" + this.enc.length);\n    }\n\n    return \"string\" === typeof this.enc ? this.enc.charCodeAt(pos) : this.enc[pos];\n  };\n\n  Stream.prototype.hexByte = function (b) {\n    return this.hexDigits.charAt(b >> 4 & 0xF) + this.hexDigits.charAt(b & 0xF);\n  };\n\n  Stream.prototype.hexDump = function (start, end, raw) {\n    var s = \"\";\n\n    for (var i = start; i < end; ++i) {\n      s += this.hexByte(this.get(i));\n\n      if (raw !== true) {\n        switch (i & 0xF) {\n          case 0x7:\n            s += \"  \";\n            break;\n\n          case 0xF:\n            s += \"\\n\";\n            break;\n\n          default:\n            s += \" \";\n        }\n      }\n    }\n\n    return s;\n  };\n\n  Stream.prototype.isASCII = function (start, end) {\n    for (var i = start; i < end; ++i) {\n      var c = this.get(i);\n\n      if (c < 32 || c > 176) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  Stream.prototype.parseStringISO = function (start, end) {\n    var s = \"\";\n\n    for (var i = start; i < end; ++i) {\n      s += String.fromCharCode(this.get(i));\n    }\n\n    return s;\n  };\n\n  Stream.prototype.parseStringUTF = function (start, end) {\n    var s = \"\";\n\n    for (var i = start; i < end;) {\n      var c = this.get(i++);\n\n      if (c < 128) {\n        s += String.fromCharCode(c);\n      } else if (c > 191 && c < 224) {\n        s += String.fromCharCode((c & 0x1F) << 6 | this.get(i++) & 0x3F);\n      } else {\n        s += String.fromCharCode((c & 0x0F) << 12 | (this.get(i++) & 0x3F) << 6 | this.get(i++) & 0x3F);\n      }\n    }\n\n    return s;\n  };\n\n  Stream.prototype.parseStringBMP = function (start, end) {\n    var str = \"\";\n    var hi;\n    var lo;\n\n    for (var i = start; i < end;) {\n      hi = this.get(i++);\n      lo = this.get(i++);\n      str += String.fromCharCode(hi << 8 | lo);\n    }\n\n    return str;\n  };\n\n  Stream.prototype.parseTime = function (start, end, shortYear) {\n    var s = this.parseStringISO(start, end);\n    var m = (shortYear ? reTimeS : reTimeL).exec(s);\n\n    if (!m) {\n      return \"Unrecognized time: \" + s;\n    }\n\n    if (shortYear) {\n      // to avoid querying the timer, use the fixed range [1970, 2069]\n      // it will conform with ITU X.400 [-10, +40] sliding window until 2030\n      m[1] = +m[1];\n      m[1] += +m[1] < 70 ? 2000 : 1900;\n    }\n\n    s = m[1] + \"-\" + m[2] + \"-\" + m[3] + \" \" + m[4];\n\n    if (m[5]) {\n      s += \":\" + m[5];\n\n      if (m[6]) {\n        s += \":\" + m[6];\n\n        if (m[7]) {\n          s += \".\" + m[7];\n        }\n      }\n    }\n\n    if (m[8]) {\n      s += \" UTC\";\n\n      if (m[8] != \"Z\") {\n        s += m[8];\n\n        if (m[9]) {\n          s += \":\" + m[9];\n        }\n      }\n    }\n\n    return s;\n  };\n\n  Stream.prototype.parseInteger = function (start, end) {\n    var v = this.get(start);\n    var neg = v > 127;\n    var pad = neg ? 255 : 0;\n    var len;\n    var s = \"\"; // skip unuseful bits (not allowed in DER)\n\n    while (v == pad && ++start < end) {\n      v = this.get(start);\n    }\n\n    len = end - start;\n\n    if (len === 0) {\n      return neg ? -1 : 0;\n    } // show bit length of huge integers\n\n\n    if (len > 4) {\n      s = v;\n      len <<= 3;\n\n      while (((+s ^ pad) & 0x80) == 0) {\n        s = +s << 1;\n        --len;\n      }\n\n      s = \"(\" + len + \" bit)\\n\";\n    } // decode the integer\n\n\n    if (neg) {\n      v = v - 256;\n    }\n\n    var n = new Int10(v);\n\n    for (var i = start + 1; i < end; ++i) {\n      n.mulAdd(256, this.get(i));\n    }\n\n    return s + n.toString();\n  };\n\n  Stream.prototype.parseBitString = function (start, end, maxLength) {\n    var unusedBit = this.get(start);\n    var lenBit = (end - start - 1 << 3) - unusedBit;\n    var intro = \"(\" + lenBit + \" bit)\\n\";\n    var s = \"\";\n\n    for (var i = start + 1; i < end; ++i) {\n      var b = this.get(i);\n      var skip = i == end - 1 ? unusedBit : 0;\n\n      for (var j = 7; j >= skip; --j) {\n        s += b >> j & 1 ? \"1\" : \"0\";\n      }\n\n      if (s.length > maxLength) {\n        return intro + stringCut(s, maxLength);\n      }\n    }\n\n    return intro + s;\n  };\n\n  Stream.prototype.parseOctetString = function (start, end, maxLength) {\n    if (this.isASCII(start, end)) {\n      return stringCut(this.parseStringISO(start, end), maxLength);\n    }\n\n    var len = end - start;\n    var s = \"(\" + len + \" byte)\\n\";\n    maxLength /= 2; // we work in bytes\n\n    if (len > maxLength) {\n      end = start + maxLength;\n    }\n\n    for (var i = start; i < end; ++i) {\n      s += this.hexByte(this.get(i));\n    }\n\n    if (len > maxLength) {\n      s += ellipsis;\n    }\n\n    return s;\n  };\n\n  Stream.prototype.parseOID = function (start, end, maxLength) {\n    var s = \"\";\n    var n = new Int10();\n    var bits = 0;\n\n    for (var i = start; i < end; ++i) {\n      var v = this.get(i);\n      n.mulAdd(128, v & 0x7F);\n      bits += 7;\n\n      if (!(v & 0x80)) {\n        // finished\n        if (s === \"\") {\n          n = n.simplify();\n\n          if (n instanceof Int10) {\n            n.sub(80);\n            s = \"2.\" + n.toString();\n          } else {\n            var m = n < 80 ? n < 40 ? 0 : 1 : 2;\n            s = m + \".\" + (n - m * 40);\n          }\n        } else {\n          s += \".\" + n.toString();\n        }\n\n        if (s.length > maxLength) {\n          return stringCut(s, maxLength);\n        }\n\n        n = new Int10();\n        bits = 0;\n      }\n    }\n\n    if (bits > 0) {\n      s += \".incomplete\";\n    }\n\n    return s;\n  };\n\n  return Stream;\n}();\n\nexport { Stream };\n\nvar ASN1 =\n/** @class */\nfunction () {\n  function ASN1(stream, header, length, tag, sub) {\n    if (!(tag instanceof ASN1Tag)) {\n      throw new Error(\"Invalid tag value.\");\n    }\n\n    this.stream = stream;\n    this.header = header;\n    this.length = length;\n    this.tag = tag;\n    this.sub = sub;\n  }\n\n  ASN1.prototype.typeName = function () {\n    switch (this.tag.tagClass) {\n      case 0:\n        // universal\n        switch (this.tag.tagNumber) {\n          case 0x00:\n            return \"EOC\";\n\n          case 0x01:\n            return \"BOOLEAN\";\n\n          case 0x02:\n            return \"INTEGER\";\n\n          case 0x03:\n            return \"BIT_STRING\";\n\n          case 0x04:\n            return \"OCTET_STRING\";\n\n          case 0x05:\n            return \"NULL\";\n\n          case 0x06:\n            return \"OBJECT_IDENTIFIER\";\n\n          case 0x07:\n            return \"ObjectDescriptor\";\n\n          case 0x08:\n            return \"EXTERNAL\";\n\n          case 0x09:\n            return \"REAL\";\n\n          case 0x0A:\n            return \"ENUMERATED\";\n\n          case 0x0B:\n            return \"EMBEDDED_PDV\";\n\n          case 0x0C:\n            return \"UTF8String\";\n\n          case 0x10:\n            return \"SEQUENCE\";\n\n          case 0x11:\n            return \"SET\";\n\n          case 0x12:\n            return \"NumericString\";\n\n          case 0x13:\n            return \"PrintableString\";\n          // ASCII subset\n\n          case 0x14:\n            return \"TeletexString\";\n          // aka T61String\n\n          case 0x15:\n            return \"VideotexString\";\n\n          case 0x16:\n            return \"IA5String\";\n          // ASCII\n\n          case 0x17:\n            return \"UTCTime\";\n\n          case 0x18:\n            return \"GeneralizedTime\";\n\n          case 0x19:\n            return \"GraphicString\";\n\n          case 0x1A:\n            return \"VisibleString\";\n          // ASCII subset\n\n          case 0x1B:\n            return \"GeneralString\";\n\n          case 0x1C:\n            return \"UniversalString\";\n\n          case 0x1E:\n            return \"BMPString\";\n        }\n\n        return \"Universal_\" + this.tag.tagNumber.toString();\n\n      case 1:\n        return \"Application_\" + this.tag.tagNumber.toString();\n\n      case 2:\n        return \"[\" + this.tag.tagNumber.toString() + \"]\";\n      // Context\n\n      case 3:\n        return \"Private_\" + this.tag.tagNumber.toString();\n    }\n  };\n\n  ASN1.prototype.content = function (maxLength) {\n    if (this.tag === undefined) {\n      return null;\n    }\n\n    if (maxLength === undefined) {\n      maxLength = Infinity;\n    }\n\n    var content = this.posContent();\n    var len = Math.abs(this.length);\n\n    if (!this.tag.isUniversal()) {\n      if (this.sub !== null) {\n        return \"(\" + this.sub.length + \" elem)\";\n      }\n\n      return this.stream.parseOctetString(content, content + len, maxLength);\n    }\n\n    switch (this.tag.tagNumber) {\n      case 0x01:\n        // BOOLEAN\n        return this.stream.get(content) === 0 ? \"false\" : \"true\";\n\n      case 0x02:\n        // INTEGER\n        return this.stream.parseInteger(content, content + len);\n\n      case 0x03:\n        // BIT_STRING\n        return this.sub ? \"(\" + this.sub.length + \" elem)\" : this.stream.parseBitString(content, content + len, maxLength);\n\n      case 0x04:\n        // OCTET_STRING\n        return this.sub ? \"(\" + this.sub.length + \" elem)\" : this.stream.parseOctetString(content, content + len, maxLength);\n      // case 0x05: // NULL\n\n      case 0x06:\n        // OBJECT_IDENTIFIER\n        return this.stream.parseOID(content, content + len, maxLength);\n      // case 0x07: // ObjectDescriptor\n      // case 0x08: // EXTERNAL\n      // case 0x09: // REAL\n      // case 0x0A: // ENUMERATED\n      // case 0x0B: // EMBEDDED_PDV\n\n      case 0x10: // SEQUENCE\n\n      case 0x11:\n        // SET\n        if (this.sub !== null) {\n          return \"(\" + this.sub.length + \" elem)\";\n        } else {\n          return \"(no elem)\";\n        }\n\n      case 0x0C:\n        // UTF8String\n        return stringCut(this.stream.parseStringUTF(content, content + len), maxLength);\n\n      case 0x12: // NumericString\n\n      case 0x13: // PrintableString\n\n      case 0x14: // TeletexString\n\n      case 0x15: // VideotexString\n\n      case 0x16: // IA5String\n      // case 0x19: // GraphicString\n\n      case 0x1A:\n        // VisibleString\n        // case 0x1B: // GeneralString\n        // case 0x1C: // UniversalString\n        return stringCut(this.stream.parseStringISO(content, content + len), maxLength);\n\n      case 0x1E:\n        // BMPString\n        return stringCut(this.stream.parseStringBMP(content, content + len), maxLength);\n\n      case 0x17: // UTCTime\n\n      case 0x18:\n        // GeneralizedTime\n        return this.stream.parseTime(content, content + len, this.tag.tagNumber == 0x17);\n    }\n\n    return null;\n  };\n\n  ASN1.prototype.toString = function () {\n    return this.typeName() + \"@\" + this.stream.pos + \"[header:\" + this.header + \",length:\" + this.length + \",sub:\" + (this.sub === null ? \"null\" : this.sub.length) + \"]\";\n  };\n\n  ASN1.prototype.toPrettyString = function (indent) {\n    if (indent === undefined) {\n      indent = \"\";\n    }\n\n    var s = indent + this.typeName() + \" @\" + this.stream.pos;\n\n    if (this.length >= 0) {\n      s += \"+\";\n    }\n\n    s += this.length;\n\n    if (this.tag.tagConstructed) {\n      s += \" (constructed)\";\n    } else if (this.tag.isUniversal() && (this.tag.tagNumber == 0x03 || this.tag.tagNumber == 0x04) && this.sub !== null) {\n      s += \" (encapsulates)\";\n    }\n\n    s += \"\\n\";\n\n    if (this.sub !== null) {\n      indent += \"  \";\n\n      for (var i = 0, max = this.sub.length; i < max; ++i) {\n        s += this.sub[i].toPrettyString(indent);\n      }\n    }\n\n    return s;\n  };\n\n  ASN1.prototype.posStart = function () {\n    return this.stream.pos;\n  };\n\n  ASN1.prototype.posContent = function () {\n    return this.stream.pos + this.header;\n  };\n\n  ASN1.prototype.posEnd = function () {\n    return this.stream.pos + this.header + Math.abs(this.length);\n  };\n\n  ASN1.prototype.toHexString = function () {\n    return this.stream.hexDump(this.posStart(), this.posEnd(), true);\n  };\n\n  ASN1.decodeLength = function (stream) {\n    var buf = stream.get();\n    var len = buf & 0x7F;\n\n    if (len == buf) {\n      return len;\n    } // no reason to use Int10, as it would be a huge buffer anyways\n\n\n    if (len > 6) {\n      throw new Error(\"Length over 48 bits not supported at position \" + (stream.pos - 1));\n    }\n\n    if (len === 0) {\n      return null;\n    } // undefined\n\n\n    buf = 0;\n\n    for (var i = 0; i < len; ++i) {\n      buf = buf * 256 + stream.get();\n    }\n\n    return buf;\n  };\n  /**\n   * Retrieve the hexadecimal value (as a string) of the current ASN.1 element\n   * @returns {string}\n   * @public\n   */\n\n\n  ASN1.prototype.getHexStringValue = function () {\n    var hexString = this.toHexString();\n    var offset = this.header * 2;\n    var length = this.length * 2;\n    return hexString.substr(offset, length);\n  };\n\n  ASN1.decode = function (str) {\n    var stream;\n\n    if (!(str instanceof Stream)) {\n      stream = new Stream(str, 0);\n    } else {\n      stream = str;\n    }\n\n    var streamStart = new Stream(stream);\n    var tag = new ASN1Tag(stream);\n    var len = ASN1.decodeLength(stream);\n    var start = stream.pos;\n    var header = start - streamStart.pos;\n    var sub = null;\n\n    var getSub = function () {\n      var ret = [];\n\n      if (len !== null) {\n        // definite length\n        var end = start + len;\n\n        while (stream.pos < end) {\n          ret[ret.length] = ASN1.decode(stream);\n        }\n\n        if (stream.pos != end) {\n          throw new Error(\"Content size is not correct for container starting at offset \" + start);\n        }\n      } else {\n        // undefined length\n        try {\n          for (;;) {\n            var s = ASN1.decode(stream);\n\n            if (s.tag.isEOC()) {\n              break;\n            }\n\n            ret[ret.length] = s;\n          }\n\n          len = start - stream.pos; // undefined lengths are represented as negative values\n        } catch (e) {\n          throw new Error(\"Exception while decoding undefined length content: \" + e);\n        }\n      }\n\n      return ret;\n    };\n\n    if (tag.tagConstructed) {\n      // must have valid content\n      sub = getSub();\n    } else if (tag.isUniversal() && (tag.tagNumber == 0x03 || tag.tagNumber == 0x04)) {\n      // sometimes BitString and OctetString are used to encapsulate ASN.1\n      try {\n        if (tag.tagNumber == 0x03) {\n          if (stream.get() != 0) {\n            throw new Error(\"BIT STRINGs with unused bits cannot encapsulate.\");\n          }\n        }\n\n        sub = getSub();\n\n        for (var i = 0; i < sub.length; ++i) {\n          if (sub[i].tag.isEOC()) {\n            throw new Error(\"EOC is not supposed to be actual content.\");\n          }\n        }\n      } catch (e) {\n        // but silently ignore when they don't\n        sub = null;\n      }\n    }\n\n    if (sub === null) {\n      if (len === null) {\n        throw new Error(\"We can't skip over an invalid tag with undefined length at offset \" + start);\n      }\n\n      stream.pos = start + Math.abs(len);\n    }\n\n    return new ASN1(streamStart, header, len, tag, sub);\n  };\n\n  return ASN1;\n}();\n\nexport { ASN1 };\n\nvar ASN1Tag =\n/** @class */\nfunction () {\n  function ASN1Tag(stream) {\n    var buf = stream.get();\n    this.tagClass = buf >> 6;\n    this.tagConstructed = (buf & 0x20) !== 0;\n    this.tagNumber = buf & 0x1F;\n\n    if (this.tagNumber == 0x1F) {\n      // long tag\n      var n = new Int10();\n\n      do {\n        buf = stream.get();\n        n.mulAdd(128, buf & 0x7F);\n      } while (buf & 0x80);\n\n      this.tagNumber = n.simplify();\n    }\n  }\n\n  ASN1Tag.prototype.isUniversal = function () {\n    return this.tagClass === 0x00;\n  };\n\n  ASN1Tag.prototype.isEOC = function () {\n    return this.tagClass === 0x00 && this.tagNumber === 0x00;\n  };\n\n  return ASN1Tag;\n}();\n\nexport { ASN1Tag };","map":{"version":3,"names":["Int10","ellipsis","reTimeS","reTimeL","stringCut","str","len","length","substring","Stream","enc","pos","hexDigits","prototype","get","undefined","Error","charCodeAt","hexByte","b","charAt","hexDump","start","end","raw","s","i","isASCII","c","parseStringISO","String","fromCharCode","parseStringUTF","parseStringBMP","hi","lo","parseTime","shortYear","m","exec","parseInteger","v","neg","pad","n","mulAdd","toString","parseBitString","maxLength","unusedBit","lenBit","intro","skip","j","parseOctetString","parseOID","bits","simplify","sub","ASN1","stream","header","tag","ASN1Tag","typeName","tagClass","tagNumber","content","Infinity","posContent","Math","abs","isUniversal","toPrettyString","indent","tagConstructed","max","posStart","posEnd","toHexString","decodeLength","buf","getHexStringValue","hexString","offset","substr","decode","streamStart","getSub","ret","isEOC","e"],"sources":["C:/Users/Administrator/Desktop/code/computer-system/src/frontend/node_modules/jsencrypt/lib/lib/asn1js/asn1.js"],"sourcesContent":["// ASN.1 JavaScript decoder\n// Copyright (c) 2008-2014 Lapo Luchini <lapo@lapo.it>\n// Permission to use, copy, modify, and/or distribute this software for any\n// purpose with or without fee is hereby granted, provided that the above\n// copyright notice and this permission notice appear in all copies.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\n/*global oids */\nimport { Int10 } from \"./int10\";\nvar ellipsis = \"\\u2026\";\nvar reTimeS = /^(\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\nvar reTimeL = /^(\\d\\d\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\nfunction stringCut(str, len) {\n    if (str.length > len) {\n        str = str.substring(0, len) + ellipsis;\n    }\n    return str;\n}\nvar Stream = /** @class */ (function () {\n    function Stream(enc, pos) {\n        this.hexDigits = \"0123456789ABCDEF\";\n        if (enc instanceof Stream) {\n            this.enc = enc.enc;\n            this.pos = enc.pos;\n        }\n        else {\n            // enc should be an array or a binary string\n            this.enc = enc;\n            this.pos = pos;\n        }\n    }\n    Stream.prototype.get = function (pos) {\n        if (pos === undefined) {\n            pos = this.pos++;\n        }\n        if (pos >= this.enc.length) {\n            throw new Error(\"Requesting byte offset \" + pos + \" on a stream of length \" + this.enc.length);\n        }\n        return (\"string\" === typeof this.enc) ? this.enc.charCodeAt(pos) : this.enc[pos];\n    };\n    Stream.prototype.hexByte = function (b) {\n        return this.hexDigits.charAt((b >> 4) & 0xF) + this.hexDigits.charAt(b & 0xF);\n    };\n    Stream.prototype.hexDump = function (start, end, raw) {\n        var s = \"\";\n        for (var i = start; i < end; ++i) {\n            s += this.hexByte(this.get(i));\n            if (raw !== true) {\n                switch (i & 0xF) {\n                    case 0x7:\n                        s += \"  \";\n                        break;\n                    case 0xF:\n                        s += \"\\n\";\n                        break;\n                    default:\n                        s += \" \";\n                }\n            }\n        }\n        return s;\n    };\n    Stream.prototype.isASCII = function (start, end) {\n        for (var i = start; i < end; ++i) {\n            var c = this.get(i);\n            if (c < 32 || c > 176) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Stream.prototype.parseStringISO = function (start, end) {\n        var s = \"\";\n        for (var i = start; i < end; ++i) {\n            s += String.fromCharCode(this.get(i));\n        }\n        return s;\n    };\n    Stream.prototype.parseStringUTF = function (start, end) {\n        var s = \"\";\n        for (var i = start; i < end;) {\n            var c = this.get(i++);\n            if (c < 128) {\n                s += String.fromCharCode(c);\n            }\n            else if ((c > 191) && (c < 224)) {\n                s += String.fromCharCode(((c & 0x1F) << 6) | (this.get(i++) & 0x3F));\n            }\n            else {\n                s += String.fromCharCode(((c & 0x0F) << 12) | ((this.get(i++) & 0x3F) << 6) | (this.get(i++) & 0x3F));\n            }\n        }\n        return s;\n    };\n    Stream.prototype.parseStringBMP = function (start, end) {\n        var str = \"\";\n        var hi;\n        var lo;\n        for (var i = start; i < end;) {\n            hi = this.get(i++);\n            lo = this.get(i++);\n            str += String.fromCharCode((hi << 8) | lo);\n        }\n        return str;\n    };\n    Stream.prototype.parseTime = function (start, end, shortYear) {\n        var s = this.parseStringISO(start, end);\n        var m = (shortYear ? reTimeS : reTimeL).exec(s);\n        if (!m) {\n            return \"Unrecognized time: \" + s;\n        }\n        if (shortYear) {\n            // to avoid querying the timer, use the fixed range [1970, 2069]\n            // it will conform with ITU X.400 [-10, +40] sliding window until 2030\n            m[1] = +m[1];\n            m[1] += (+m[1] < 70) ? 2000 : 1900;\n        }\n        s = m[1] + \"-\" + m[2] + \"-\" + m[3] + \" \" + m[4];\n        if (m[5]) {\n            s += \":\" + m[5];\n            if (m[6]) {\n                s += \":\" + m[6];\n                if (m[7]) {\n                    s += \".\" + m[7];\n                }\n            }\n        }\n        if (m[8]) {\n            s += \" UTC\";\n            if (m[8] != \"Z\") {\n                s += m[8];\n                if (m[9]) {\n                    s += \":\" + m[9];\n                }\n            }\n        }\n        return s;\n    };\n    Stream.prototype.parseInteger = function (start, end) {\n        var v = this.get(start);\n        var neg = (v > 127);\n        var pad = neg ? 255 : 0;\n        var len;\n        var s = \"\";\n        // skip unuseful bits (not allowed in DER)\n        while (v == pad && ++start < end) {\n            v = this.get(start);\n        }\n        len = end - start;\n        if (len === 0) {\n            return neg ? -1 : 0;\n        }\n        // show bit length of huge integers\n        if (len > 4) {\n            s = v;\n            len <<= 3;\n            while (((+s ^ pad) & 0x80) == 0) {\n                s = +s << 1;\n                --len;\n            }\n            s = \"(\" + len + \" bit)\\n\";\n        }\n        // decode the integer\n        if (neg) {\n            v = v - 256;\n        }\n        var n = new Int10(v);\n        for (var i = start + 1; i < end; ++i) {\n            n.mulAdd(256, this.get(i));\n        }\n        return s + n.toString();\n    };\n    Stream.prototype.parseBitString = function (start, end, maxLength) {\n        var unusedBit = this.get(start);\n        var lenBit = ((end - start - 1) << 3) - unusedBit;\n        var intro = \"(\" + lenBit + \" bit)\\n\";\n        var s = \"\";\n        for (var i = start + 1; i < end; ++i) {\n            var b = this.get(i);\n            var skip = (i == end - 1) ? unusedBit : 0;\n            for (var j = 7; j >= skip; --j) {\n                s += (b >> j) & 1 ? \"1\" : \"0\";\n            }\n            if (s.length > maxLength) {\n                return intro + stringCut(s, maxLength);\n            }\n        }\n        return intro + s;\n    };\n    Stream.prototype.parseOctetString = function (start, end, maxLength) {\n        if (this.isASCII(start, end)) {\n            return stringCut(this.parseStringISO(start, end), maxLength);\n        }\n        var len = end - start;\n        var s = \"(\" + len + \" byte)\\n\";\n        maxLength /= 2; // we work in bytes\n        if (len > maxLength) {\n            end = start + maxLength;\n        }\n        for (var i = start; i < end; ++i) {\n            s += this.hexByte(this.get(i));\n        }\n        if (len > maxLength) {\n            s += ellipsis;\n        }\n        return s;\n    };\n    Stream.prototype.parseOID = function (start, end, maxLength) {\n        var s = \"\";\n        var n = new Int10();\n        var bits = 0;\n        for (var i = start; i < end; ++i) {\n            var v = this.get(i);\n            n.mulAdd(128, v & 0x7F);\n            bits += 7;\n            if (!(v & 0x80)) { // finished\n                if (s === \"\") {\n                    n = n.simplify();\n                    if (n instanceof Int10) {\n                        n.sub(80);\n                        s = \"2.\" + n.toString();\n                    }\n                    else {\n                        var m = n < 80 ? n < 40 ? 0 : 1 : 2;\n                        s = m + \".\" + (n - m * 40);\n                    }\n                }\n                else {\n                    s += \".\" + n.toString();\n                }\n                if (s.length > maxLength) {\n                    return stringCut(s, maxLength);\n                }\n                n = new Int10();\n                bits = 0;\n            }\n        }\n        if (bits > 0) {\n            s += \".incomplete\";\n        }\n        return s;\n    };\n    return Stream;\n}());\nexport { Stream };\nvar ASN1 = /** @class */ (function () {\n    function ASN1(stream, header, length, tag, sub) {\n        if (!(tag instanceof ASN1Tag)) {\n            throw new Error(\"Invalid tag value.\");\n        }\n        this.stream = stream;\n        this.header = header;\n        this.length = length;\n        this.tag = tag;\n        this.sub = sub;\n    }\n    ASN1.prototype.typeName = function () {\n        switch (this.tag.tagClass) {\n            case 0: // universal\n                switch (this.tag.tagNumber) {\n                    case 0x00:\n                        return \"EOC\";\n                    case 0x01:\n                        return \"BOOLEAN\";\n                    case 0x02:\n                        return \"INTEGER\";\n                    case 0x03:\n                        return \"BIT_STRING\";\n                    case 0x04:\n                        return \"OCTET_STRING\";\n                    case 0x05:\n                        return \"NULL\";\n                    case 0x06:\n                        return \"OBJECT_IDENTIFIER\";\n                    case 0x07:\n                        return \"ObjectDescriptor\";\n                    case 0x08:\n                        return \"EXTERNAL\";\n                    case 0x09:\n                        return \"REAL\";\n                    case 0x0A:\n                        return \"ENUMERATED\";\n                    case 0x0B:\n                        return \"EMBEDDED_PDV\";\n                    case 0x0C:\n                        return \"UTF8String\";\n                    case 0x10:\n                        return \"SEQUENCE\";\n                    case 0x11:\n                        return \"SET\";\n                    case 0x12:\n                        return \"NumericString\";\n                    case 0x13:\n                        return \"PrintableString\"; // ASCII subset\n                    case 0x14:\n                        return \"TeletexString\"; // aka T61String\n                    case 0x15:\n                        return \"VideotexString\";\n                    case 0x16:\n                        return \"IA5String\"; // ASCII\n                    case 0x17:\n                        return \"UTCTime\";\n                    case 0x18:\n                        return \"GeneralizedTime\";\n                    case 0x19:\n                        return \"GraphicString\";\n                    case 0x1A:\n                        return \"VisibleString\"; // ASCII subset\n                    case 0x1B:\n                        return \"GeneralString\";\n                    case 0x1C:\n                        return \"UniversalString\";\n                    case 0x1E:\n                        return \"BMPString\";\n                }\n                return \"Universal_\" + this.tag.tagNumber.toString();\n            case 1:\n                return \"Application_\" + this.tag.tagNumber.toString();\n            case 2:\n                return \"[\" + this.tag.tagNumber.toString() + \"]\"; // Context\n            case 3:\n                return \"Private_\" + this.tag.tagNumber.toString();\n        }\n    };\n    ASN1.prototype.content = function (maxLength) {\n        if (this.tag === undefined) {\n            return null;\n        }\n        if (maxLength === undefined) {\n            maxLength = Infinity;\n        }\n        var content = this.posContent();\n        var len = Math.abs(this.length);\n        if (!this.tag.isUniversal()) {\n            if (this.sub !== null) {\n                return \"(\" + this.sub.length + \" elem)\";\n            }\n            return this.stream.parseOctetString(content, content + len, maxLength);\n        }\n        switch (this.tag.tagNumber) {\n            case 0x01: // BOOLEAN\n                return (this.stream.get(content) === 0) ? \"false\" : \"true\";\n            case 0x02: // INTEGER\n                return this.stream.parseInteger(content, content + len);\n            case 0x03: // BIT_STRING\n                return this.sub ? \"(\" + this.sub.length + \" elem)\" :\n                    this.stream.parseBitString(content, content + len, maxLength);\n            case 0x04: // OCTET_STRING\n                return this.sub ? \"(\" + this.sub.length + \" elem)\" :\n                    this.stream.parseOctetString(content, content + len, maxLength);\n            // case 0x05: // NULL\n            case 0x06: // OBJECT_IDENTIFIER\n                return this.stream.parseOID(content, content + len, maxLength);\n            // case 0x07: // ObjectDescriptor\n            // case 0x08: // EXTERNAL\n            // case 0x09: // REAL\n            // case 0x0A: // ENUMERATED\n            // case 0x0B: // EMBEDDED_PDV\n            case 0x10: // SEQUENCE\n            case 0x11: // SET\n                if (this.sub !== null) {\n                    return \"(\" + this.sub.length + \" elem)\";\n                }\n                else {\n                    return \"(no elem)\";\n                }\n            case 0x0C: // UTF8String\n                return stringCut(this.stream.parseStringUTF(content, content + len), maxLength);\n            case 0x12: // NumericString\n            case 0x13: // PrintableString\n            case 0x14: // TeletexString\n            case 0x15: // VideotexString\n            case 0x16: // IA5String\n            // case 0x19: // GraphicString\n            case 0x1A: // VisibleString\n                // case 0x1B: // GeneralString\n                // case 0x1C: // UniversalString\n                return stringCut(this.stream.parseStringISO(content, content + len), maxLength);\n            case 0x1E: // BMPString\n                return stringCut(this.stream.parseStringBMP(content, content + len), maxLength);\n            case 0x17: // UTCTime\n            case 0x18: // GeneralizedTime\n                return this.stream.parseTime(content, content + len, (this.tag.tagNumber == 0x17));\n        }\n        return null;\n    };\n    ASN1.prototype.toString = function () {\n        return this.typeName() + \"@\" + this.stream.pos + \"[header:\" + this.header + \",length:\" + this.length + \",sub:\" + ((this.sub === null) ? \"null\" : this.sub.length) + \"]\";\n    };\n    ASN1.prototype.toPrettyString = function (indent) {\n        if (indent === undefined) {\n            indent = \"\";\n        }\n        var s = indent + this.typeName() + \" @\" + this.stream.pos;\n        if (this.length >= 0) {\n            s += \"+\";\n        }\n        s += this.length;\n        if (this.tag.tagConstructed) {\n            s += \" (constructed)\";\n        }\n        else if ((this.tag.isUniversal() && ((this.tag.tagNumber == 0x03) || (this.tag.tagNumber == 0x04))) && (this.sub !== null)) {\n            s += \" (encapsulates)\";\n        }\n        s += \"\\n\";\n        if (this.sub !== null) {\n            indent += \"  \";\n            for (var i = 0, max = this.sub.length; i < max; ++i) {\n                s += this.sub[i].toPrettyString(indent);\n            }\n        }\n        return s;\n    };\n    ASN1.prototype.posStart = function () {\n        return this.stream.pos;\n    };\n    ASN1.prototype.posContent = function () {\n        return this.stream.pos + this.header;\n    };\n    ASN1.prototype.posEnd = function () {\n        return this.stream.pos + this.header + Math.abs(this.length);\n    };\n    ASN1.prototype.toHexString = function () {\n        return this.stream.hexDump(this.posStart(), this.posEnd(), true);\n    };\n    ASN1.decodeLength = function (stream) {\n        var buf = stream.get();\n        var len = buf & 0x7F;\n        if (len == buf) {\n            return len;\n        }\n        // no reason to use Int10, as it would be a huge buffer anyways\n        if (len > 6) {\n            throw new Error(\"Length over 48 bits not supported at position \" + (stream.pos - 1));\n        }\n        if (len === 0) {\n            return null;\n        } // undefined\n        buf = 0;\n        for (var i = 0; i < len; ++i) {\n            buf = (buf * 256) + stream.get();\n        }\n        return buf;\n    };\n    /**\n     * Retrieve the hexadecimal value (as a string) of the current ASN.1 element\n     * @returns {string}\n     * @public\n     */\n    ASN1.prototype.getHexStringValue = function () {\n        var hexString = this.toHexString();\n        var offset = this.header * 2;\n        var length = this.length * 2;\n        return hexString.substr(offset, length);\n    };\n    ASN1.decode = function (str) {\n        var stream;\n        if (!(str instanceof Stream)) {\n            stream = new Stream(str, 0);\n        }\n        else {\n            stream = str;\n        }\n        var streamStart = new Stream(stream);\n        var tag = new ASN1Tag(stream);\n        var len = ASN1.decodeLength(stream);\n        var start = stream.pos;\n        var header = start - streamStart.pos;\n        var sub = null;\n        var getSub = function () {\n            var ret = [];\n            if (len !== null) {\n                // definite length\n                var end = start + len;\n                while (stream.pos < end) {\n                    ret[ret.length] = ASN1.decode(stream);\n                }\n                if (stream.pos != end) {\n                    throw new Error(\"Content size is not correct for container starting at offset \" + start);\n                }\n            }\n            else {\n                // undefined length\n                try {\n                    for (;;) {\n                        var s = ASN1.decode(stream);\n                        if (s.tag.isEOC()) {\n                            break;\n                        }\n                        ret[ret.length] = s;\n                    }\n                    len = start - stream.pos; // undefined lengths are represented as negative values\n                }\n                catch (e) {\n                    throw new Error(\"Exception while decoding undefined length content: \" + e);\n                }\n            }\n            return ret;\n        };\n        if (tag.tagConstructed) {\n            // must have valid content\n            sub = getSub();\n        }\n        else if (tag.isUniversal() && ((tag.tagNumber == 0x03) || (tag.tagNumber == 0x04))) {\n            // sometimes BitString and OctetString are used to encapsulate ASN.1\n            try {\n                if (tag.tagNumber == 0x03) {\n                    if (stream.get() != 0) {\n                        throw new Error(\"BIT STRINGs with unused bits cannot encapsulate.\");\n                    }\n                }\n                sub = getSub();\n                for (var i = 0; i < sub.length; ++i) {\n                    if (sub[i].tag.isEOC()) {\n                        throw new Error(\"EOC is not supposed to be actual content.\");\n                    }\n                }\n            }\n            catch (e) {\n                // but silently ignore when they don't\n                sub = null;\n            }\n        }\n        if (sub === null) {\n            if (len === null) {\n                throw new Error(\"We can't skip over an invalid tag with undefined length at offset \" + start);\n            }\n            stream.pos = start + Math.abs(len);\n        }\n        return new ASN1(streamStart, header, len, tag, sub);\n    };\n    return ASN1;\n}());\nexport { ASN1 };\nvar ASN1Tag = /** @class */ (function () {\n    function ASN1Tag(stream) {\n        var buf = stream.get();\n        this.tagClass = buf >> 6;\n        this.tagConstructed = ((buf & 0x20) !== 0);\n        this.tagNumber = buf & 0x1F;\n        if (this.tagNumber == 0x1F) { // long tag\n            var n = new Int10();\n            do {\n                buf = stream.get();\n                n.mulAdd(128, buf & 0x7F);\n            } while (buf & 0x80);\n            this.tagNumber = n.simplify();\n        }\n    }\n    ASN1Tag.prototype.isUniversal = function () {\n        return this.tagClass === 0x00;\n    };\n    ASN1Tag.prototype.isEOC = function () {\n        return this.tagClass === 0x00 && this.tagNumber === 0x00;\n    };\n    return ASN1Tag;\n}());\nexport { ASN1Tag };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}