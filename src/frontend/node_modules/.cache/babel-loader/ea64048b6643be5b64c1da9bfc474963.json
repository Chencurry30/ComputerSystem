{"ast":null,"code":"// import {retrievePassword} from \"@/Servers/ServersApi\"\nexport default {\n  props: ['phone'],\n  name: 'sendCodeBtn',\n\n  data() {\n    return {\n      sendTimeCode: 5,\n      //再次发送的时间\n      bVerification: false,\n      //节流阀，控制点击获取验证码\n      verificationCodeInfo: \"发送验证码\"\n    };\n  },\n\n  methods: {\n    //发送验证码的按钮\n    getVerCode() {\n      if (this.phone === '') {\n        return;\n      }\n\n      if (this.bVerification === true) {\n        return;\n      }\n\n      this.bVerification = true; //关闭节流阀\n\n      let time = setInterval(() => {\n        this.sendTimeCode -= 1;\n        this.verificationCodeInfo = `剩余${this.sendTimeCode}秒后发送`;\n\n        if (this.sendTimeCode <= 0) {\n          this.verificationCodeInfo = '发送验证码';\n          this.sendTimeCode = 5; //对应的间隔时间\n\n          clearInterval(time);\n          this.bVerification = false; //打开节流阀\n        }\n      }, 1000);\n      let phone = {\n        phone: this.phone\n      };\n      console.log(phone); // retrievePassword(phone).then(res=>{\n      //   console.log(res.data.code);\n      //   if(res.data.code===414){\n      //     this.$message.error(\"手机号为空，请输入手机号\")\n      //   }else if(res.data.code===413){\n      //     this.$message.error(\"手机号已注册，请输入新的手机号\")\n      //   }else if(res.data.code===200){\n      //     this.$message({\n      //         message: \"验证码已发送，请注意查收\",\n      //         type: \"success\",\n      //       })\n      //   }\n      // })\n      // },\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAOA;AACA;EACAA,gBADA;EAEAC,mBAFA;;EAGAC;IACA;MACAC,eADA;MACA;MACAC,oBAFA;MAEA;MACAC;IAHA;EAKA,CATA;;EAUAC;IACA;IACAC;MACA;QACA;MACA;;MACA;QACA;MACA;;MACA,0BAPA,CAOA;;MACA;QACA;QACA;;QACA;UACA;UACA,sBAFA,CAEA;;UACAC;UACA,2BAJA,CAIA;QACA;MACA,CATA,EASA,IATA;MAUA;QACAC;MADA;MAGAC,mBArBA,CAsBA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAGA;MACA;IACA;;EAxCA;AAVA","names":["props","name","data","sendTimeCode","bVerification","verificationCodeInfo","methods","getVerCode","clearInterval","phone","console"],"sourceRoot":"src/components","sources":["sendCodeBtn.vue"],"sourcesContent":["<template>\r\n  <div class=\"getVerificationCode\" @click=\"getVerCode\">\r\n    {{ verificationCodeInfo }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import {retrievePassword} from \"@/Servers/ServersApi\"\r\nexport default {\r\n  props:['phone'],\r\n  name:'sendCodeBtn',\r\n  data(){\r\n    return{\r\n      sendTimeCode:5,      //再次发送的时间\r\n      bVerification:false,   //节流阀，控制点击获取验证码\r\n      verificationCodeInfo:\"发送验证码\",\r\n    }\r\n  },\r\n  methods:{\r\n    //发送验证码的按钮\r\n    getVerCode(){\r\n      if(this.phone === ''){\r\n        return;\r\n      }\r\n      if(this.bVerification === true){\r\n        return;\r\n      }\r\n      this.bVerification = true;       //关闭节流阀\r\n      let time = setInterval(()=>{\r\n        this.sendTimeCode -= 1\r\n        this.verificationCodeInfo = `剩余${this.sendTimeCode}秒后发送`\r\n        if(this.sendTimeCode <=0){\r\n          this.verificationCodeInfo = '发送验证码'\r\n          this.sendTimeCode = 5   //对应的间隔时间\r\n          clearInterval(time)\r\n           this.bVerification = false  //打开节流阀\r\n        }\r\n      },1000)\r\n      let phone={\r\n        phone: this.phone\r\n      }\r\n      console.log(phone);\r\n      // retrievePassword(phone).then(res=>{\r\n      //   console.log(res.data.code);\r\n      //   if(res.data.code===414){\r\n      //     this.$message.error(\"手机号为空，请输入手机号\")\r\n      //   }else if(res.data.code===413){\r\n      //     this.$message.error(\"手机号已注册，请输入新的手机号\")\r\n      //   }else if(res.data.code===200){\r\n      //     this.$message({\r\n      //         message: \"验证码已发送，请注意查收\",\r\n      //         type: \"success\",\r\n      //       })\r\n      //   }\r\n        \r\n\r\n      // })\r\n      // },\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n      .getVerificationCode {\r\n        position: absolute;\r\n        width: 100px;\r\n        height: 40px;\r\n        top: 0px;\r\n        right: 20px;\r\n        border-radius: 4px;\r\n        text-align: center;\r\n        cursor: pointer;\r\n        color: #ffffff;\r\n        background-color: #409eff;\r\n        z-index: 99999;\r\n      }\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}