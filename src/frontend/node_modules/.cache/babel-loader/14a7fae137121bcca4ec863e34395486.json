{"ast":null,"code":"import { retrievePassword } from \"@/Servers/ServersApi\";\nexport default {\n  props: ['phone'],\n  name: 'sendCodeBtn',\n\n  data() {\n    return {\n      sendTimeCode: 5,\n      //再次发送的时间\n      bVerification: false,\n      //节流阀，控制点击获取验证码\n      verificationCodeInfo: \"发送验证码\"\n    };\n  },\n\n  methods: {\n    //发送验证码的按钮\n    getVerCode() {\n      if (this.phone === '') {\n        return;\n      }\n\n      if (this.bVerification === true) {\n        return;\n      }\n\n      this.bVerification = true; //关闭节流阀\n\n      let time = setInterval(() => {\n        this.sendTimeCode -= 1;\n        this.verificationCodeInfo = `剩余${this.sendTimeCode}秒后发送`;\n\n        if (this.sendTimeCode <= 0) {\n          this.verificationCodeInfo = '发送验证码';\n          this.sendTimeCode = 5; //对应的间隔时间\n\n          clearInterval(time);\n          this.bVerification = false; //打开节流阀\n        }\n      }, 1000);\n      let phone = {\n        phone: this.phone\n      };\n      console.log(phone);\n      retrievePassword(phone).then(res => {\n        console.log(res.data.code);\n\n        if (res.data.code === 414) {\n          this.$message.error(\"手机号为空，请输入手机号\");\n        } else if (res.data.code === 413) {\n          this.$message.error(\"手机号已注册，请输入新的手机号\");\n        } else if (res.data.code === 200) {\n          this.$message({\n            message: \"验证码已发送，请注意查收\",\n            type: \"success\"\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAOA;AACA;EACAA,gBADA;EAEAC,mBAFA;;EAGAC;IACA;MACAC,eADA;MACA;MACAC,oBAFA;MAEA;MACAC;IAHA;EAKA,CATA;;EAUAC;IACA;IACAC;MACA;QACA;MACA;;MACA;QACA;MACA;;MACA,0BAPA,CAOA;;MACA;QACA;QACA;;QACA;UACA;UACA,sBAFA,CAEA;;UACAC;UACA,2BAJA,CAIA;QACA;MACA,CATA,EASA,IATA;MAUA;QACAC;MADA;MAGAC;MACAC;QACAD;;QACA;UACA;QACA,CAFA,MAEA;UACA;QACA,CAFA,MAEA;UACA;YACAE,uBADA;YAEAC;UAFA;QAIA;MAGA,CAdA;IAeA;;EAvCA;AAVA","names":["props","name","data","sendTimeCode","bVerification","verificationCodeInfo","methods","getVerCode","clearInterval","phone","console","retrievePassword","message","type"],"sourceRoot":"src/components/sendCode","sources":["sendCodeBtn.vue"],"sourcesContent":["<template>\n  <div class=\"getVerificationCode\" @click=\"getVerCode\">\n    {{ verificationCodeInfo }}\n  </div>\n</template>\n\n<script>\nimport {retrievePassword} from \"@/Servers/ServersApi\"\nexport default {\n  props:['phone'],\n  name:'sendCodeBtn',\n  data(){\n    return{\n      sendTimeCode:5,      //再次发送的时间\n      bVerification:false,   //节流阀，控制点击获取验证码\n      verificationCodeInfo:\"发送验证码\",\n    }\n  },\n  methods:{\n    //发送验证码的按钮\n    getVerCode(){\n      if(this.phone === ''){\n        return;\n      }\n      if(this.bVerification === true){\n        return;\n      }\n      this.bVerification = true;       //关闭节流阀\n      let time = setInterval(()=>{\n        this.sendTimeCode -= 1\n        this.verificationCodeInfo = `剩余${this.sendTimeCode}秒后发送`\n        if(this.sendTimeCode <=0){\n          this.verificationCodeInfo = '发送验证码'\n          this.sendTimeCode = 5   //对应的间隔时间\n          clearInterval(time)\n           this.bVerification = false  //打开节流阀\n        }\n      },1000)\n      let phone={\n        phone: this.phone\n      }\n      console.log(phone);\n      retrievePassword(phone).then(res=>{\n        console.log(res.data.code);\n        if(res.data.code===414){\n          this.$message.error(\"手机号为空，请输入手机号\")\n        }else if(res.data.code===413){\n          this.$message.error(\"手机号已注册，请输入新的手机号\")\n        }else if(res.data.code===200){\n          this.$message({\n              message: \"验证码已发送，请注意查收\",\n              type: \"success\",\n            })\n        }\n\n\n      })\n      },\n      }\n    }\n</script>\n\n<style lang=\"less\" scoped>\n      .getVerificationCode {\n        position: absolute;\n        width: 100px;\n        height: 40px;\n        top: 0px;\n        right: 20px;\n        border-radius: 4px;\n        text-align: center;\n        cursor: pointer;\n        color: #ffffff;\n        background-color: #409eff;\n        z-index: 99999;\n      }\n\n</style>\n"]},"metadata":{},"sourceType":"module"}