{"ast":null,"code":"import addQuestionPopup from '../../components/questionPopup/addQuestionPopup';\nimport editQuestionPopup from '../../components/questionPopup/editQuestionPopup';\nimport viewQuestionPopup from '../../components/questionPopup/viewQuestionPopup';\nimport { getQuestionList, deleteQuestionItem } from '../../services/questionManage';\nexport default {\n  name: \"questionManage\",\n  data() {\n    return {\n      searchForm: {\n        // 查询条件\n        key: \"\"\n      },\n      //根据后端所川回的值\n      tableData: [],\n      total: 0,\n      //页面总条数\n      page: 1,\n      //请求第一次的params\n      pageSize: 0,\n      classfyId: \"\",\n      //题目类型\n      coursId: \"\"\n    };\n  },\n  components: {\n    addQuestionPopup,\n    viewQuestionPopup,\n    editQuestionPopup\n  },\n  mounted() {\n    this.getQuestionData({\n      classfyId: 0,\n      coursId: 0,\n      pageNum: 1\n    });\n  },\n  methods: {\n    //获取所有列表的信息\n    getQuestionData({\n      classfyId,\n      coursId,\n      pageNum\n    }) {\n      getQuestionList({\n        classfyId,\n        coursId,\n        pageNum\n      }).then(res => {\n        if (res.data.code === 403) {\n          this.$message.error('权限不足!!!');\n        } else if (res.data.code === 200) {\n          this.tableData = res.data.data.list;\n          this.total = res.data.data.total; //后端返回的总数量\n          this.pageSize = res.data.data.pageSize;\n        } else if (res.data.code === 417) {\n          this.tableData = [];\n          this.total = 0;\n          this.pageSize = 8;\n        }\n      });\n    },\n    //分页\n    handleCurrentChange(page) {\n      let classfyId = 0; //种类\n      let coursId = 0; //来源\n      this.page = page;\n      if (this.classfyId === '') {\n        classfyId = 0;\n      } else {\n        classfyId = parseInt(this.classfyId);\n      }\n      if (this.coursId === '') {\n        coursId = 0;\n      } else {\n        coursId = parseInt(this.coursId);\n      }\n      this.getQuestionData({\n        classfyId,\n        coursId,\n        pageNum: this.page\n      });\n    },\n    //删除对应的题目 \n    deleteQuestionRow(row) {\n      console.log(row);\n      deleteQuestionItem(row.questionId).then(res => {\n        if (res.data.code === 200) {\n          this.$message.success('删除成功');\n          //获取对应的相关数据 \n          this.getQuestionData({\n            classfyId: 0,\n            coursId: 0,\n            pageNum: this.page\n          });\n        }\n      });\n    },\n    //根据相应的条件查询出对应的题目内容\n    getSearchBtn() {\n      let classfyId = this.classfyId === \"\" ? 0 : this.classfyId;\n      let coursId = this.coursId === \"\" ? 0 : this.coursId;\n      console.log(classfyId, coursId);\n      this.getQuestionData({\n        classfyId,\n        coursId,\n        pageNum: this.page\n      });\n    },\n    //添加题目的弹窗 \n    addSubBtn() {\n      this.$refs.addQuestionPopup.showDialogVisible();\n    },\n    //编辑题目 \n    editRow(rowItem) {\n      this.$refs.editQuestionPopup.showDialogVisible(rowItem);\n      //刷新页面 \n      // this.getQuestionData({classfyId:0,coursId:0,pageNum:1});\n    },\n\n    //查看具体的题目\n    lookQuestionRow(row) {\n      this.$refs.viewQuestionPopup.showQuestionMore(row);\n    }\n  }\n};","map":{"version":3,"mappings":"AAqEA;AACA;AACA;AACA;AACA;EACAA;EACAC;IACA;MACAC;QACA;QACAC;MACA;MACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IAAAC;IAAAC;IAAAC;EAAA;EACAC;IACA;MAAAN;MAAAC;MAAAM;IAAA;EACA;EACAC;IACA;IACAC;MAAAT;MAAAC;MAAAM;IAAA;MACAG;QAAAV;QAAAC;QAAAM;MAAA;QACA;UACA;QACA;UACA;UACA;UACA;QACA;UACA;UACA;UACA;QACA;MACA;IACA;IAEA;IACAI;MACA;MACA;MACA;MACA;QACAX;MACA;QACAA;MACA;MACA;QACAC;MACA;QACAA;MACA;MACA;QAAAD;QAAAC;QAAAM;MAAA;IACA;IACA;IACAK;MACAC;MACAC;QACA;UACA;UACA;UACA;YAAAd;YAAAC;YAAAM;UAAA;QACA;MACA;IACA;IACA;IACAQ;MACA;MACA;MACAF;MACA;QAAAb;QAAAC;QAAAM;MAAA;IACA;IACA;IACAS;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;;IACA;IACAC;MACA;IACA;EACA;AACA","names":["name","data","searchForm","key","tableData","total","page","pageSize","classfyId","coursId","components","addQuestionPopup","viewQuestionPopup","editQuestionPopup","mounted","pageNum","methods","getQuestionData","getQuestionList","handleCurrentChange","deleteQuestionRow","console","deleteQuestionItem","getSearchBtn","addSubBtn","editRow","lookQuestionRow"],"sourceRoot":"src/views/questionManage","sources":["questionManage.vue"],"sourcesContent":["<!--题目管理-->\r\n<template>\r\n  <div class=\"appMain\">\r\n    <div class=\"filter-container\">\r\n      <div class=\"filter-container-left\">\r\n        <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"addSubBtn\" v-has=\"`system:question:insert`\">\r\n          新 增\r\n        </el-button>\r\n      </div>\r\n      <div class=\"filter-container-right\">\r\n        <div class=\"nav-left-second\">\r\n          <el-select v-model=\"classfyId\" placeholder=\"请选择筛选科目\">\r\n            <el-option label=\"全部\" value=\"0\">全部</el-option>\r\n            <el-option label=\"数学\" value=\"2\">数学</el-option>\r\n            <el-option label=\"政治\" value=\"3\">政治</el-option>\r\n            <el-option label=\"计网\" value=\"4\">计网</el-option>\r\n            <el-option label=\"数据结构\" value=\"5\">数据结构</el-option>\r\n            <el-option label=\"计组\" value=\"6\">计组</el-option>\r\n          </el-select>\r\n        </div>\r\n        <div class=\"nav-left-second\">\r\n          <el-select v-model=\"coursId\" placeholder=\"请选择筛选题目来源\">\r\n            <el-option label=\"全部\" value=\"0\">全部</el-option>\r\n            <el-option label=\"自主出题\" value=\"1\">自主出题</el-option>\r\n            <el-option label=\"408\" value=\"2\">408</el-option>\r\n            <el-option label=\"考研真题\" value=\"3\">考研真题</el-option>\r\n\r\n          </el-select>\r\n        </div>\r\n        <el-button type=\"primary\" class=\"searchData\" @click=\"getSearchBtn\">查 询</el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <!--主题-->\r\n    <el-table :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\r\n      <el-table-column prop=\"questionId\" label=\"ID\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"sites\" label=\"题目考点\"></el-table-column>\r\n      <el-table-column prop=\"classifyName\" label=\"题目类型\"></el-table-column>\r\n      <el-table-column prop=\"difficult\" label=\"题目难度\"></el-table-column>\r\n      <el-table-column prop=\"source\" label=\"题目来源\"></el-table-column>\r\n      <el-table-column prop=\"year\" label=\"题目年份\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"250\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"success\" size=\"mini\" @click=\"lookQuestionRow(scope.row)\"\r\n            v-has=\"`system:question:view`\">查看</el-button>\r\n          <el-button type=\"primary\" size=\"mini\" @click=\"editRow(scope.row)\"\r\n            v-has=\"`system:question:update`\">编辑</el-button>\r\n          <el-button type=\"danger\" size=\"mini\" @click=\"deleteQuestionRow(scope.row)\"\r\n            v-has=\"`system:question:delete`\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!--分页表单-->\r\n    <el-pagination class=\"filter-page\" background layout=\"prev, pager, next\" :total=\"total\" :page-size=\"pageSize\"\r\n      @current-change=\"handleCurrentChange\">\r\n    </el-pagination>\r\n\r\n    <!--提示框的组件-->\r\n    <addQuestionPopup ref=\"addQuestionPopup\"></addQuestionPopup>\r\n    <!--显示题目详情的组件-->\r\n    <editQuestionPopup ref=\"editQuestionPopup\"></editQuestionPopup>\r\n    <!--修改题目信息的组件-->\r\n    <viewQuestionPopup ref=\"viewQuestionPopup\"></viewQuestionPopup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport addQuestionPopup from '../../components/questionPopup/addQuestionPopup';\r\nimport editQuestionPopup from '../../components/questionPopup/editQuestionPopup';\r\nimport viewQuestionPopup from '../../components/questionPopup/viewQuestionPopup';\r\nimport { getQuestionList, deleteQuestionItem } from '../../services/questionManage'\r\nexport default {\r\n  name: \"questionManage\",\r\n  data() {\r\n    return {\r\n      searchForm: {\r\n        // 查询条件\r\n        key: \"\",\r\n      },\r\n      //根据后端所川回的值\r\n      tableData: [],\r\n      total: 0, //页面总条数\r\n      page: 1, //请求第一次的params\r\n      pageSize: 0,\r\n      classfyId: \"\",          //题目类型\r\n      coursId: \"\",\r\n    };\r\n  },\r\n  components: { addQuestionPopup, viewQuestionPopup, editQuestionPopup },\r\n  mounted() {\r\n    this.getQuestionData({ classfyId: 0, coursId: 0, pageNum: 1 });\r\n  },\r\n  methods: {\r\n    //获取所有列表的信息\r\n    getQuestionData({ classfyId, coursId, pageNum }) {\r\n      getQuestionList({ classfyId, coursId, pageNum }).then((res) => {\r\n        if (res.data.code === 403) {\r\n          this.$message.error('权限不足!!!')\r\n        } else if (res.data.code === 200) {\r\n          this.tableData = res.data.data.list;\r\n          this.total = res.data.data.total; //后端返回的总数量\r\n          this.pageSize = res.data.data.pageSize\r\n        } else if (res.data.code === 417) {\r\n          this.tableData = []\r\n          this.total = 0\r\n          this.pageSize = 8\r\n        }\r\n      })\r\n    },\r\n\r\n    //分页\r\n    handleCurrentChange(page) {\r\n      let classfyId = 0;   //种类\r\n      let coursId = 0;   //来源\r\n      this.page = page;\r\n      if (this.classfyId === '') {\r\n        classfyId = 0;\r\n      } else {\r\n        classfyId = parseInt(this.classfyId)\r\n      }\r\n      if (this.coursId === '') {\r\n        coursId = 0;\r\n      } else {\r\n        coursId = parseInt(this.coursId)\r\n      }\r\n      this.getQuestionData({ classfyId, coursId, pageNum: this.page });\r\n    },\r\n    //删除对应的题目 \r\n    deleteQuestionRow(row) {\r\n      console.log(row);\r\n      deleteQuestionItem(row.questionId).then((res) => {\r\n        if (res.data.code === 200) {\r\n          this.$message.success('删除成功')\r\n          //获取对应的相关数据 \r\n          this.getQuestionData({ classfyId: 0, coursId: 0, pageNum: this.page })\r\n        }\r\n      })\r\n    },\r\n    //根据相应的条件查询出对应的题目内容\r\n    getSearchBtn() {\r\n      let classfyId = this.classfyId === \"\" ? 0 : this.classfyId\r\n      let coursId = this.coursId === \"\" ? 0 : this.coursId\r\n      console.log(classfyId, coursId);\r\n      this.getQuestionData({ classfyId, coursId, pageNum: this.page })\r\n    },\r\n    //添加题目的弹窗 \r\n    addSubBtn() {\r\n      this.$refs.addQuestionPopup.showDialogVisible();\r\n    },\r\n    //编辑题目 \r\n    editRow(rowItem) {\r\n      this.$refs.editQuestionPopup.showDialogVisible(rowItem);\r\n      //刷新页面 \r\n      // this.getQuestionData({classfyId:0,coursId:0,pageNum:1});\r\n    },\r\n    //查看具体的题目\r\n    lookQuestionRow(row) {\r\n      this.$refs.viewQuestionPopup.showQuestionMore(row)\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.filter-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  .filter-container-right {\r\n    display: flex;\r\n\r\n    .nav-left-second {\r\n      margin-right: 10px;\r\n    }\r\n\r\n    .searchData {\r\n      margin-left: 10px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}