{"ast":null,"code":"import rules from '@/utils/rules';\nimport { addUser } from '@/services/systemManage';\nexport default {\n  name: 'addRolepopUp',\n  data() {\n    return {\n      dataForm: {\n        username: '',\n        email: '',\n        age: '',\n        sex: '保密'\n      },\n      dialogVisible: false,\n      checkForm: {\n        //用户名校验\n        username: [{\n          require: true,\n          validator: rules.FormValidate.Form().validateUserName,\n          trigger: 'blur'\n        }],\n        //邮箱校验\n        email: [{\n          require: true,\n          validator: rules.FormValidate.Form().validateEmail,\n          trigger: 'blur'\n        }],\n        //年龄校验\n        age: [{\n          require: true,\n          validator: rules.FormValidate.Form().validataAge,\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    closeDialogVisible() {\n      this.dialogVisible = false;\n    },\n    showDialog() {\n      this.dialogVisible = true;\n    },\n    submit() {\n      let data = {};\n      data.username = this.dataForm.username;\n      data.email = this.dataForm.email;\n      data.age = this.dataForm.age;\n      data.sex = this.dataForm.sex;\n      addUser(data).then(res => {\n        if (res.data.code === 200) {\n          this.$message({\n            message: \"添加用户成功！\",\n            type: \"success\"\n          });\n          this.dialogVisible = false; //关闭弹窗\n          this.$parent.getFollowdiaryList(); //刷新页面\n        } else if (res.data.code === 411) {\n          this.$message({\n            message: \"用户名重复！\",\n            type: \"error\"\n          });\n        } else if (res.data.code === 406) {\n          this.$message({\n            message: res.data.message,\n            type: \"error\"\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AAkCA;AACA;AACA;EACAA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;QACA;QACAL,WACA;UAAAM;UAAAC;UAAAC;QAAA,EACA;QACA;QACAP,QACA;UAAAK;UAAAC;UAAAC;QAAA,EACA;QACA;QACAN,MACA;UAAAI;UAAAC;UAAAC;QAAA;MAEA;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACAd;MACAA;MACAA;MACAA;MACAe;QACA;UACA;YACAC;YACAC;UACA;UACA;UACA;QACA;UACA;YACAD;YACAC;UACA;QACA;UACA;YACAD;YACAC;UACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","dataForm","username","email","age","sex","dialogVisible","checkForm","require","validator","trigger","methods","closeDialogVisible","showDialog","submit","addUser","message","type"],"sourceRoot":"src/components/userPopup","sources":["addUserPopup.vue"],"sourcesContent":["<template>\r\n  <div class=\"addRoleBox\">\r\n    <el-dialog title=\"新增用户\" :visible.sync=\"dialogVisible\" width=\"30%\" center>\r\n      <el-form label-width=\"0px\" class=\"login_in\" ref=\"dataForm\" :model=\"dataForm\" :rules=\"checkForm\">\r\n        <div class=\"form-info\">\r\n          <el-form-item prop=\"username\">\r\n            <el-input type=\"text\" prefix-icon=\"el-icon-user\" placeholder=\"请输入用户用户名\" v-model.trim=\"dataForm.username\">\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item prop=\"email\">\r\n            <el-input prefix-icon=\"el-icon-user\" placeholder=\"请输入用户邮箱\" v-model.trim=\"dataForm.email\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item prop=\"age\">\r\n            <el-input type=\"text\" prefix-icon=\"el-icon-user\" placeholder=\"请输入用户年龄\" v-model.trim=\"dataForm.age\">\r\n            </el-input>\r\n          </el-form-item>\r\n          <el-form-item prop=\"sex\">\r\n            <el-select v-model=\"dataForm.sex\">\r\n              <el-option label=\"女\" value=\"女\"></el-option>\r\n              <el-option label=\"男\" value=\"男\"></el-option>\r\n              <el-option label=\"保密\" value=\"保密\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </div>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"closeDialogVisible\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"showDialogVisible, submit()\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n  \r\n<script>\r\nimport rules from '@/utils/rules'\r\nimport { addUser } from '@/services/systemManage'\r\nexport default {\r\n  name: 'addRolepopUp',\r\n  data() {\r\n    return {\r\n      dataForm: {\r\n        username: '',\r\n        email: '',\r\n        age: '',\r\n        sex: '保密'\r\n      },\r\n      dialogVisible: false,\r\n      checkForm: {\r\n        //用户名校验\r\n        username: [\r\n          { require: true, validator: rules.FormValidate.Form().validateUserName, trigger: 'blur' }\r\n        ],\r\n        //邮箱校验\r\n        email: [\r\n          { require: true, validator: rules.FormValidate.Form().validateEmail, trigger: 'blur' }\r\n        ],\r\n        //年龄校验\r\n        age: [\r\n          { require: true, validator: rules.FormValidate.Form().validataAge, trigger: 'blur' }\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    closeDialogVisible() {\r\n      this.dialogVisible = false\r\n    },\r\n    showDialog() {\r\n      this.dialogVisible = true\r\n    },\r\n    submit() {\r\n      let data = {}\r\n      data.username = this.dataForm.username\r\n      data.email = this.dataForm.email\r\n      data.age = (this.dataForm.age)\r\n      data.sex = this.dataForm.sex\r\n      addUser(data).then((res) => {\r\n        if (res.data.code === 200) {\r\n          this.$message({\r\n            message: \"添加用户成功！\",\r\n            type: \"success\",\r\n          })\r\n          this.dialogVisible = false  //关闭弹窗\r\n          this.$parent.getFollowdiaryList() //刷新页面\r\n        } else if (res.data.code === 411) {\r\n          this.$message({\r\n            message: \"用户名重复！\",\r\n            type: \"error\",\r\n          })\r\n        } else if (res.data.code === 406) {\r\n          this.$message({\r\n            message: res.data.message,\r\n            type: \"error\"\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}