{"ast":null,"code":"import auditVideo from '../../components/popUp/video/auditVideo';\nimport toViewAllpopUp from '../../components/popUp/video/toViewAllpopUp';\nimport { getExamineList } from '../../services/videoManage';\nexport default {\n  name: 'examineManage',\n  data() {\n    return {\n      tableData: [],\n      total: 0,\n      //页面总条数\n      page: 1,\n      //请求第一次的params\n      pageSize: 0,\n      listType: 0,\n      //0表示的是查看全部的视屏列表\n      statusType: 0 //获取审核视屏的状态\n    };\n  },\n\n  components: {\n    auditVideo,\n    toViewAllpopUp\n  },\n  mounted() {\n    this.getAuditVideoList(-1);\n  },\n  methods: {\n    //获取全部视屏的审核列表\n    getAuditVideoList(status) {\n      //修改展示数据的类型 \n      this.listType = 1;\n      let page = this.page;\n      //保存审核状态 \n      this.statusType = status;\n      getExamineList({\n        status,\n        page\n      }).then(res => {\n        console.log(res);\n        if (res.data.code === 200) {\n          this.page = 1;\n          this.tableData = res.data.data.list;\n          this.total = res.data.data.total; //后端返回的总数量\n          this.pageSize = res.data.data.pageSize; //后端返回的每一页的总数\n        } else if (res.data.code === 417) {\n          this.page = 1;\n          this.tableData = [];\n          this.total = 0; //后端返回的总数量\n          this.pageSize = 12; //后端返回的每一页的总数\n        }\n      });\n    },\n\n    //分页\n    handleCurrentChange(page) {\n      this.page = page;\n      this.getAuditVideoList(this.statusType);\n    },\n    //审核视屏 \n    auditRow(row) {\n      this.$refs.auditVideo.showDialog(row);\n    },\n    //查看信息\n    toViewRow(row) {\n      this.$refs.toViewAllpopUp.showDialog(row);\n    }\n  }\n};","map":{"version":3,"mappings":"AA+CA;AACA;AACA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IAAAC;IAAAC;EAAA;EACAC;IACA;EACA;EACAC;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;MACAC;QAAAC;QAAAX;MAAA;QACAY;QACA;UACA;UACA;UACA;UACA;QACA;UACA;UACA;UACA;UACA;QACA;MACA;IACA;;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;IACA;IAGA;IACAC;MACA;IACA;EACA;AAEA","names":["name","data","tableData","total","page","pageSize","listType","statusType","components","auditVideo","toViewAllpopUp","mounted","methods","getAuditVideoList","getExamineList","status","console","handleCurrentChange","auditRow","toViewRow"],"sourceRoot":"src/views/videoManage","sources":["examineManage.vue"],"sourcesContent":["<!--审核视屏-->\r\n<template>\r\n  <div class=\"appMain\">\r\n    \r\n    <div class=\"filter-container\">\r\n      <div class=\"filter-container-left\">\r\n        <el-button type=\"primary\" @click=\"getAuditVideoList(-1)\">获取审核列表</el-button>\r\n      </div>\r\n      <div class=\"filter-container-right\">\r\n        <el-button type=\"primary\" @click=\"getAuditVideoList(0)\">未审核</el-button>\r\n        <el-button type=\"primary\" @click=\"getAuditVideoList(1)\">审核通过</el-button>\r\n        <el-button type=\"primary\" @click=\"getAuditVideoList(2)\">审核不通过</el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <el-table :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n      <el-table-column prop=\"examineId\" label=\"审核ID\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"视屏名称\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"introduction\" label=\"视屏介绍\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"authorNickname\" label=\"上传作者\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"typeName\" label=\"视屏种类\"></el-table-column>\r\n      <el-table-column prop=\"time\" label=\"上传时间\"></el-table-column>\r\n      <el-table-column prop=\"applyNickname\" label=\"审核人\"></el-table-column>\r\n      <el-table-column prop=\"reviewComment\" label=\"审核信息\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"250\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"success\" size=\"mini\" @click=\"auditRow(scope.row)\" v-if=\"scope.row.examineStatus === 0\"\r\n            v-has=\"`system:video:examine`\">审核</el-button>\r\n          <el-button type=\"primary\" size=\"mini\" @click=\"toViewRow(scope.row)\"\r\n            v-has=\"`system:video:viewExamine`\">查看</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-pagination class=\"filter-page\" background layout=\"prev, pager, next\" :total=\"total\" :page-size=\"pageSize\"\r\n      @current-change=\"handleCurrentChange\">\r\n    </el-pagination>\r\n\r\n    <!--审核视屏的弹窗-->\r\n    <auditVideo ref=\"auditVideo\"></auditVideo>\r\n    <!--查看完整信息的弹窗-->\r\n    <toViewAllpopUp ref=\"toViewAllpopUp\"></toViewAllpopUp>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport auditVideo from '../../components/popUp/video/auditVideo'\r\nimport toViewAllpopUp from '../../components/popUp/video/toViewAllpopUp'\r\nimport { getExamineList } from '../../services/videoManage'\r\nexport default {\r\n  name: 'examineManage',\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      total: 0, //页面总条数\r\n      page: 1, //请求第一次的params\r\n      pageSize: 0,\r\n      listType: 0,   //0表示的是查看全部的视屏列表\r\n      statusType: 0   //获取审核视屏的状态\r\n    }\r\n  },\r\n  components: { auditVideo, toViewAllpopUp },\r\n  mounted() {\r\n    this.getAuditVideoList(-1)\r\n  },\r\n  methods: {\r\n\r\n    //获取全部视屏的审核列表\r\n    getAuditVideoList(status) {\r\n      //修改展示数据的类型 \r\n      this.listType = 1\r\n      let page = this.page\r\n      //保存审核状态 \r\n      this.statusType = status\r\n      getExamineList({ status, page }).then((res) => {\r\n        console.log(res);\r\n        if (res.data.code === 200) {\r\n          this.page = 1\r\n          this.tableData = res.data.data.list\r\n          this.total = res.data.data.total; //后端返回的总数量\r\n          this.pageSize = res.data.data.pageSize //后端返回的每一页的总数\r\n        } else if (res.data.code === 417) {\r\n          this.page = 1\r\n          this.tableData = []\r\n          this.total = 0; //后端返回的总数量\r\n          this.pageSize = 12 //后端返回的每一页的总数\r\n        }\r\n      })\r\n    },\r\n    //分页\r\n    handleCurrentChange(page) {\r\n      this.page = page;\r\n      this.getAuditVideoList(this.statusType)\r\n    },\r\n    //审核视屏 \r\n    auditRow(row) {\r\n      this.$refs.auditVideo.showDialog(row)\r\n    },\r\n\r\n\r\n    //查看信息\r\n    toViewRow(row) {\r\n      this.$refs.toViewAllpopUp.showDialog(row)\r\n    },\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.filter-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  .filter-container-left {\r\n    margin-left: 10px;\r\n  }\r\n\r\n  .filter-container-right {\r\n    margin-right: 10px;\r\n  }\r\n}\r\n\r\n\r\n.filter-page {\r\n  margin-top: 10px;\r\n\r\n  text-align: center;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}