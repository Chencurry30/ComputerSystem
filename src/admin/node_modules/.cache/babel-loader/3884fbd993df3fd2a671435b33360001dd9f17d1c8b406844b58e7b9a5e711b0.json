{"ast":null,"code":"//查看信息的弹窗 \nimport toViewpopUp from '../../components/popUp/video/toViewpopUp';\nimport { getVideoList, deleteVideoAction } from '../../services/videoManage';\nexport default {\n  name: 'videoManage',\n  data() {\n    return {\n      tableData: [],\n      total: 0,\n      //页面总条数\n      page: 1,\n      //请求第一次的params\n      pageSize: 0,\n      listType: 0,\n      //0表示的是查看全部的视屏列表\n      statusType: 0 //获取审核视屏的状态\n    };\n  },\n\n  components: {\n    toViewpopUp\n  },\n  mounted() {\n    this.getAllVideoList(1);\n  },\n  methods: {\n    //获取所有的视屏列表\n    getAllVideoList(pageNum) {\n      getVideoList(pageNum).then(res => {\n        if (res.data.code === 200) {\n          this.tableData = res.data.data.list;\n          this.total = res.data.data.total; //后端返回的总数量\n          this.pageSize = res.data.data.pageSize; //后端返回的每一页的总数\n        } else if (res.data.code === 417) {\n          this.tableData = [];\n          this.total = 0;\n          this.pageSize = 8;\n        }\n      });\n    },\n    //分页\n    handleCurrentChange(page) {\n      this.page = page;\n      this.getAllVideoList(this.page);\n    },\n    // 删除\n    deleteTable(row) {\n      deleteVideoAction(row.videoId).then(res => {\n        if (res.data.code === 200) {\n          this.$message.success('删除视屏成功!!');\n          this.getAllVideoList(this.page);\n        }\n      });\n    },\n    //查看信息\n    toViewRow(row) {\n      this.$refs.toViewpopUp.showDialog(row);\n    }\n  }\n};","map":{"version":3,"mappings":"AAiCA;AACA;AACA;AACA;EACAA;EACAC;IAEA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACAC;EACA;EACAC;IACA;EACA;EACAC;IACA;IACAC;MACAC;QACA;UACA;UACA;UACA;QACA;UACA;UACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IAGA;IACAC;MACAC;QACA;UACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;IACA;EACA;AACA","names":["name","data","tableData","total","page","pageSize","listType","statusType","components","toViewpopUp","mounted","methods","getAllVideoList","getVideoList","handleCurrentChange","deleteTable","deleteVideoAction","toViewRow"],"sourceRoot":"src/views/videoManage","sources":["videoManage.vue"],"sourcesContent":["<!-- eslint-disable vue/no-useless-template-attributes -->\r\n<template>\r\n  <div class=\"appMain\">\r\n    <!-- 顶部选择框-->\r\n    <div class=\"filter-container\"></div>\r\n    <!--中间部分-->\r\n    <el-table :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n      <el-table-column prop=\"videoId\" label=\"视屏ID\" width=\"100\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"视屏名称\" width=\"650\"></el-table-column>\r\n      <el-table-column prop=\"nickname\" label=\"上传作者\"></el-table-column>\r\n      <el-table-column prop=\"time\" label=\"上传时间\"></el-table-column>\r\n\r\n      <el-table-column label=\"操作\" width=\"150\">\r\n        <template slot-scope=\"scope\" class=\"filter-tableBtnList\">\r\n          <el-button type=\"primary\" size=\"mini\" @click=\"toViewRow(scope.row)\" v-has=\"`system:video:view`\">查看</el-button>\r\n          <el-button type=\"danger\" size=\"mini\" @click=\"deleteTable(scope.row)\"\r\n            v-has=\"`system:video:delete`\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!--分页表单-->\r\n    <el-pagination class=\"filter-page\" background layout=\"prev, pager, next\" :total=\"total\" :page-size=\"pageSize\"\r\n      @current-change=\"handleCurrentChange\">\r\n    </el-pagination>\r\n\r\n    <!--弹窗的组件-->\r\n    <toViewpopUp ref=\"toViewpopUp\"></toViewpopUp>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//查看信息的弹窗 \r\nimport toViewpopUp from '../../components/popUp/video/toViewpopUp'\r\nimport { getVideoList, deleteVideoAction } from '../../services/videoManage'\r\nexport default {\r\n  name: 'videoManage',\r\n  data() {\r\n\r\n    return {\r\n      tableData: [],\r\n      total: 0, //页面总条数\r\n      page: 1, //请求第一次的params\r\n      pageSize: 0,\r\n      listType: 0,   //0表示的是查看全部的视屏列表\r\n      statusType: 0   //获取审核视屏的状态\r\n    }\r\n  },\r\n  components: {\r\n    toViewpopUp\r\n  },\r\n  mounted() {\r\n    this.getAllVideoList(1)\r\n  },\r\n  methods: {\r\n    //获取所有的视屏列表\r\n    getAllVideoList(pageNum) {\r\n      getVideoList(pageNum).then((res) => {\r\n        if (res.data.code === 200) {\r\n          this.tableData = res.data.data.list\r\n          this.total = res.data.data.total; //后端返回的总数量\r\n          this.pageSize = res.data.data.pageSize //后端返回的每一页的总数\r\n        } else if (res.data.code === 417) {\r\n          this.tableData = []\r\n          this.total = 0\r\n          this.pageSize = 8\r\n        }\r\n      })\r\n    },\r\n    //分页\r\n    handleCurrentChange(page) {\r\n      this.page = page;\r\n      this.getAllVideoList(this.page);\r\n    },\r\n\r\n\r\n    // 删除\r\n    deleteTable(row) {\r\n      deleteVideoAction(row.videoId).then((res) => {\r\n        if (res.data.code === 200) {\r\n          this.$message.success('删除视屏成功!!')\r\n          this.getAllVideoList(this.page)\r\n        }\r\n      })\r\n    },\r\n    //查看信息\r\n    toViewRow(row) {\r\n      this.$refs.toViewpopUp.showDialog(row)\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}